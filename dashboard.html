<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Kintra — PulseView Dashboard</title>
  <meta name="description" content="Today’s WhatsApp leads — live view." />
  <style>
    :root{
      --bg:#ffffff; --fg:#0e1726; --muted:#5b6475; --line:#e8ecf1;
      --brand:#0ea5a6; --brand-2:#5dd1c1; --good:#10b981; --warn:#f59e0b; --info:#3b82f6;
      --card:#ffffff; --shadow:0 8px 24px rgba(16,23,40,.06); --radius:18px;
    }
    *{box-sizing:border-box}
    html,body{margin:0;padding:0;background:var(--bg);color:var(--fg);font:16px/1.5 system-ui,-apple-system,Segoe UI,Roboto,Inter,Arial,sans-serif}
    a{color:inherit;text-decoration:none}
    .wrap{max-width:1100px;margin:0 auto;padding:28px 16px 64px}

    .topbar{display:flex;align-items:center;justify-content:space-between;margin-bottom:16px}
    .brand{display:flex;align-items:center;gap:10px;font-weight:700;font-size:18px}
    .brand img{width:26px;height:26px;object-fit:contain;border-radius:6px}
    .actions{display:flex;align-items:center;gap:8px;flex-wrap:wrap}
    .btn{padding:10px 14px;border:1px solid var(--line);border-radius:12px;background:#fff;cursor:pointer}
    .btn.primary{border:none;background:var(--fg);color:#fff}
    .btn.small{padding:8px 12px;font-size:14px}

    .hero{
      position:relative;border:1px solid var(--line);border-radius:20px;overflow:hidden;
      background:
        radial-gradient(1200px 300px at -10% -20%, rgba(14,165,166,.15), transparent 60%),
        radial-gradient(900px 250px at 110% -30%, rgba(93,209,193,.18), transparent 55%),
        #ffffff;
    }
    .hero::before{
      content:"";position:absolute;inset:-2px;
      background:linear-gradient(90deg, rgba(14,165,166,.18), rgba(93,209,193,.10), rgba(59,130,246,.12));
      filter:blur(28px);opacity:.6;animation:glide 8s linear infinite;pointer-events:none;
    }
    @keyframes glide{0%{transform:translateX(-30%)}100%{transform:translateX(30%)}}
    .hero-inner{position:relative;padding:22px 18px;display:flex;align-items:center;justify-content:space-between;gap:12px}
    .h-title{font-size:22px;font-weight:750;letter-spacing:.2px}
    .h-sub{color:var(--muted);font-size:14px;margin-top:4px}

    .kpis{display:grid;grid-template-columns:repeat(3,1fr);gap:12px;padding:14px 14px 18px}
    .kpi{background:var(--card);border:1px solid var(--line);border-radius:16px;padding:16px 14px;
      box-shadow:var(--shadow);display:flex;align-items:center;justify-content:space-between;gap:8px}
    .kpi .label{color:var(--muted);font-size:13px}
    .kpi .value{font-size:22px;font-weight:800;letter-spacing:.2px}
    .kpi .delta{font-size:12px;border-radius:999px;padding:6px 8px}
    .delta.up{background:rgba(16,185,129,.12);color:var(--good);border:1px solid rgba(16,185,129,.3)}
    .delta.flat{background:rgba(59,130,246,.10);color:var(--info);border:1px solid rgba(59,130,246,.25)}
    .delta.down{background:rgba(245,158,11,.12);color:var(--warn);border:1px solid rgba(245,158,11,.3)}

    .lead-grid{display:grid;grid-template-columns:1fr;gap:14px;padding:8px 2px;margin-top:6px}
    @media (min-width:641px){.lead-grid{grid-template-columns:1fr}}
    @media (min-width:981px){.lead-grid{grid-template-columns:1fr 1fr 1fr}} /* desktop: 3 per row */

    .card{
      background:var(--card);border:1px solid var(--line);border-radius:18px;padding:14px;
      box-shadow:var(--shadow);display:flex;flex-direction:column;gap:10px;min-height:150px;
      transform:translateZ(0);transition:transform .15s ease, box-shadow .15s ease, border-color .15s ease;
    }
    .card:hover{transform:translateY(-2px);box-shadow:0 10px 28px rgba(16,23,40,.08);border-color:#dfe6ee}
    .row{display:flex;align-items:center;justify-content:space-between;gap:10px}
    .id{font-weight:700}
    .badge{font-size:12px;padding:6px 8px;border-radius:10px;border:1px solid}
    .b-new{color:var(--good);background:rgba(16,185,129,.10);border-color:rgba(16,185,129,.25)}
    .b-wait{color:var(--warn);background:rgba(245,158,11,.10);border-color:rgba(245,158,11,.25)}
    .b-sent{color:var(--info);background:rgba(59,130,246,.10);border-color:rgba(59,130,246,.25)}
    .snippet{color:var(--muted);font-size:14px;border-left:3px solid #e6eef7;padding-left:10px}
    .meta{display:flex;align-items:center;gap:10px;color:var(--muted);font-size:12px}
    .cta{display:flex;gap:8px;margin-top:auto}
    .cta .btn{border-radius:10px}

    .roi{margin:22px 2px 8px;color:var(--muted);font-size:14px}
    footer{margin-top:18px;color:#8b94a6;font-size:12px;display:flex;justify-content:flex-end}

    .pulse{animation:pulse 1.8s ease-in-out 1}
    @keyframes pulse{
      0%{box-shadow:var(--shadow)}
      50%{box-shadow:0 14px 36px rgba(14,165,166,.18)}
      100%{box-shadow:var(--shadow)}
    }

    .wa{display:inline-flex;align-items:center;justify-content:center;width:18px;height:18px;border-radius:6px;background:#25D366;color:#fff;font-size:12px}
    .lang{display:flex;gap:6px}
    .lang button{border:1px solid var(--line);background:#fff;padding:8px 10px;border-radius:10px;cursor:pointer}
    .lang button.active{background:#0e1726;color:#fff;border-color:#0e1726}
  </style>
</head>
<body>
  <div class="wrap">
    <div class="topbar">
      <div class="brand">
        <img src="./img/logo.png.png" alt="Kintra logo" />
        <span>Kintra — <span data-i18n="dash_title_small">PulseView</span></span>
      </div>
      <div class="actions">
        <a class="btn small" href="./index.html" data-i18n="back_landing">← Back to landing</a>
        <a class="btn small" href="./index.html#pilot-offer" data-i18n="request_pilot">Request Pilot</a>
        <div class="lang">
          <button id="btn-en" class="active">EN</button>
          <button id="btn-it">IT</button>
        </div>
      </div>
    </div>

    <div class="hero">
      <div class="hero-inner">
        <div>
          <div class="h-title" data-i18n="hero_title">Today’s WhatsApp Leads</div>
          <div class="h-sub"><span id="live-sub" data-i18n="hero_sub">Updated live — 8 new threads since morning.</span></div>
        </div>
        <div class="actions">
          <a class="btn primary" href="#" id="btn-refresh" data-i18n="refresh_fake">Refresh (demo)</a>
        </div>
      </div>

      <div class="kpis">
        <div class="kpi" id="kpi-card-leads">
          <div>
            <div class="label" data-i18n="kpi_new_leads">New leads today</div>
            <div class="value" id="kpi-leads">8</div>
          </div>
          <div class="delta up" id="delta-leads">+12%</div>
        </div>
        <div class="kpi" id="kpi-card-reply">
          <div>
            <div class="label" data-i18n="kpi_avg_reply">Avg. reply time</div>
            <div class="value" id="kpi-reply">2m 12s</div>
          </div>
          <div class="delta flat" id="delta-reply" data-i18n="flat_vs_yday">stable vs. yesterday</div>
        </div>
        <div class="kpi" id="kpi-card-closed">
          <div>
            <div class="label" data-i18n="kpi_closed">Closed today</div>
            <div class="value" id="kpi-closed">3</div>
          </div>
          <div class="delta up" id="delta-closed">+1</div>
        </div>
      </div>
    </div>

    <div class="lead-grid" id="lead-grid">
      <div class="card" data-mins="180">
        <div class="row">
          <div class="id"><span class="wa">w</span> +39 347 221 88 32</div>
          <span class="badge b-new" data-i18n="st_new">New</span>
        </div>
        <div class="snippet" data-i18n="snip1">
          “Buongiorno, interessato al trilocale zona Navigli. È disponibile nel weekend?”
        </div>
        <div class="row meta">
          <span class="ago">3h ago</span><span>•</span><span data-i18n="agent">Agent</span>: Luca
        </div>
        <div class="cta">
          <a class="btn small" href="#" data-i18n="open_thread">Open thread</a>
          <a class="btn small" href="./index.html#wa-demo" data-i18n="draft_reply">Instant reply draft</a>
        </div>
      </div>

      <div class="card" data-mins="47">
        <div class="row">
          <div class="id"><span class="wa">w</span> +39 320 991 44 07</div>
          <span class="badge b-wait" data-i18n="st_wait">Awaiting reply</span>
        </div>
        <div class="snippet" data-i18n="snip2">
          “Foto ulteriori del bilocale in via Roma? Budget 1.200€/mese.”
        </div>
        <div class="row meta">
          <span class="ago">47m ago</span><span>•</span><span data-i18n="agent">Agent</span>: Silvia
        </div>
        <div class="cta">
          <a class="btn small" href="#" data-i18n="open_thread">Open thread</a>
          <a class="btn small" href="./index.html#wa-demo" data-i18n="draft_reply">Instant reply draft</a>
        </div>
      </div>

      <div class="card" data-mins="60">
        <div class="row">
          <div class="id"><span class="wa">w</span> +39 335 770 12 66</div>
          <span class="badge b-sent" data-i18n="st_sent">Follow-up sent</span>
        </div>
        <div class="snippet" data-i18n="snip3">
          “Grazie! Appuntamento fissato per martedì ore 18.”
        </div>
        <div class="row meta">
          <span class="ago">1h ago</span><span>•</span><span data-i18n="agent">Agent</span>: Marta
        </div>
        <div class="cta">
          <a class="btn small" href="#" data-i18n="open_thread">Open thread</a>
          <a class="btn small" href="./index.html#wa-demo" data-i18n="draft_reply">Instant reply draft</a>
        </div>
      </div>

      <div class="card" data-mins="12">
        <div class="row">
          <div class="id"><span class="wa">w</span> +39 338 991 55 02</div>
          <span class="badge b-new" data-i18n="st_new">New</span>
        </div>
        <div class="snippet" data-i18n="snip4">
          “È possibile vedere l’attico giovedì? Siamo in due.”
        </div>
        <div class="row meta">
          <span class="ago">12m ago</span><span>•</span><span data-i18n="agent">Agent</span>: Paolo
        </div>
        <div class="cta">
          <a class="btn small" href="#" data-i18n="open_thread">Open thread</a>
          <a class="btn small" href="./index.html#wa-demo" data-i18n="draft_reply">Instant reply draft</a>
        </div>
      </div>

      <div class="card" data-mins="9">
        <div class="row">
          <div class="id"><span class="wa">w</span> +39 329 800 77 61</div>
          <span class="badge b-wait" data-i18n="st_wait">Awaiting reply</span>
        </div>
        <div class="snippet" data-i18n="snip5">
          “Contratto transitorio 6 mesi? Zona centro.”
        </div>
        <div class="row meta">
          <span class="ago">9m ago</span><span>•</span><span data-i18n="agent">Agent</span>: Giulia
        </div>
        <div class="cta">
          <a class="btn small" href="#" data-i18n="open_thread">Open thread</a>
          <a class="btn small" href="./index.html#wa-demo" data-i18n="draft_reply">Instant reply draft</a>
        </div>
      </div>

      <div class="card" data-mins="120">
        <div class="row">
          <div class="id"><span class="wa">w</span> +39 331 221 44 09</div>
          <span class="badge b-sent" data-i18n="st_sent">Follow-up sent</span>
        </div>
        <div class="snippet" data-i18n="snip6">
          “Inviata scheda immobile e planimetria.”
        </div>
        <div class="row meta">
          <span class="ago">2h ago</span><span>•</span><span data-i18n="agent">Agent</span>: Elisa
        </div>
        <div class="cta">
          <a class="btn small" href="#" data-i18n="open_thread">Open thread</a>
          <a class="btn small" href="./index.html#wa-demo" data-i18n="draft_reply">Instant reply draft</a>
        </div>
      </div>
    </div>

    <div class="roi" data-i18n="roi">
      Every Kintra reply draft saves ~2.5 minutes. That’s ~1 hour reclaimed daily — per agent.
    </div>

    <footer>
      <div data-i18n="seal">Powered by Kintra AI — built for real estate teams.</div>
    </footer>
  </div>

  <script>
    // --- EN/IT dictionary
    const dict = {
      en:{
        dash_title_small:"PulseView",
        back_landing:"← Back to landing",
        request_pilot:"Request Pilot",
        hero_title:"Today’s WhatsApp Leads",
        hero_sub:"Updated live — 8 new threads since morning.",
        refresh_fake:"Refresh (demo)",
        kpi_new_leads:"New leads today",
        kpi_avg_reply:"Avg. reply time",
        kpi_closed:"Closed today",
        flat_vs_yday:"stable vs. yesterday",
        reply_faster:"faster vs. yesterday",
        reply_slower:"slower vs. yesterday",
        st_new:"New",
        st_wait:"Awaiting reply",
        st_sent:"Follow-up sent",
        agent:"Agent",
        open_thread:"Open thread",
        draft_reply:"Instant reply draft",
        roi:"Every Kintra reply draft saves ~2.5 minutes. That’s ~1 hour reclaimed daily — per agent.",
        seal:"Powered by Kintra AI — built for real estate teams.",
        snip1:"“Hi, I’m interested in the three-room flat near Navigli. Is it available this weekend?”",
        snip2:"“Any extra photos of the two-room flat on Via Roma? Budget €1,200/month.”",
        snip3:"“Thanks! Viewing booked for Tuesday at 18:00.”",
        snip4:"“Is it possible to view the penthouse on Thursday? There are two of us.”",
        snip5:"“Six-month temporary contract? City centre area.”",
        snip6:"“Sent property sheet and floor plan.”"
      },
      it:{
        dash_title_small:"PulseView",
        back_landing:"← Torna alla pagina",
        request_pilot:"Richiedi Pilot",
        hero_title:"Lead WhatsApp di oggi",
        hero_sub:"Aggiornato in tempo reale — 8 nuove conversazioni da stamattina.",
        refresh_fake:"Aggiorna (demo)",
        kpi_new_leads:"Nuovi lead oggi",
        kpi_avg_reply:"Tempo medio di risposta",
        kpi_closed:"Chiusure di oggi",
        flat_vs_yday:"stabile vs. ieri",
        reply_faster:"più veloce vs. ieri",
        reply_slower:"più lento vs. ieri",
        st_new:"Nuovo",
        st_wait:"In attesa",
        st_sent:"Follow-up inviato",
        agent:"Agente",
        open_thread:"Apri conversazione",
        draft_reply:"Bozza risposta istantanea",
        roi:"Ogni bozza Kintra fa risparmiare ~2,5 minuti. ~1 ora recuperata al giorno — per agente.",
        seal:"Tecnologia Kintra AI — creata per i team immobiliari.",
        snip1:"“Buongiorno, interessato al trilocale zona Navigli. È disponibile nel weekend?”",
        snip2:"“Foto ulteriori del bilocale in via Roma? Budget 1.200€/mese.”",
        snip3:"“Grazie! Appuntamento fissato per martedì ore 18.”",
        snip4:"“È possibile vedere l’attico giovedì? Siamo in due.”",
        snip5:"“Contratto transitorio 6 mesi? Zona centro.”",
        snip6:"“Inviata scheda immobile e planimetria.”"
      }
    };

    const cards = [...document.querySelectorAll('.card')];
    let currentLang = 'en';

    function renderAgo(el, mins){
      const lang = currentLang || (document.documentElement.lang || 'en');
      if(lang === 'it'){
        if(mins < 60) el.textContent = `${mins} min fa`;
        else el.textContent = `${Math.floor(mins/60)} h fa`;
      } else {
        if(mins < 60) el.textContent = `${mins}m ago`;
        else el.textContent = `${Math.floor(mins/60)}h ago`;
      }
    }

    function refreshAgoAll(){
      cards.forEach(c=>{
        const mins = parseInt(c.getAttribute('data-mins')||'0',10);
        const ago = c.querySelector('.ago');
        if(ago) renderAgo(ago, mins);
      });
    }

    function setLang(lang){
      const map = dict[lang] || dict.en;
      document.querySelectorAll('[data-i18n]').forEach(el=>{
        const k = el.getAttribute('data-i18n');
        if(map[k]) el.textContent = map[k];
      });
      document.getElementById('btn-en').classList.toggle('active', lang==='en');
      document.getElementById('btn-it').classList.toggle('active', lang==='it');
      document.documentElement.lang = lang;
      currentLang = lang;
      refreshAgoAll();
      try{ localStorage.setItem('kintra_lang', lang); }catch(e){}
    }

    function initLang(){
      let saved;
      try{ saved = localStorage.getItem('kintra_lang'); }catch(e){}
      if(saved){ setLang(saved); return; }
      const nav = (navigator.language || '').toLowerCase();
      if(nav.startsWith('it')) setLang('it'); else setLang('en');
    }

    // initialize card mins + ago text
    cards.forEach(c=>{
      const mins = parseInt(c.getAttribute('data-mins')||'0',10);
      c.setAttribute('data-mins', String(mins));
      const ago = c.querySelector('.ago');
      if(ago) renderAgo(ago, mins);
    });

    // Language toggle buttons
    document.getElementById('btn-en').addEventListener('click', ()=>setLang('en'));
    document.getElementById('btn-it').addEventListener('click', ()=>setLang('it'));
    initLang();

    // --- Fake-live timer: tick card timestamps each 60s
    setInterval(()=>{
      cards.forEach(c=>{
        const cur = parseInt(c.getAttribute('data-mins')||'0',10) + 1;
        c.setAttribute('data-mins', String(cur));
        const ago = c.querySelector('.ago');
        if(ago) renderAgo(ago, cur);
      });
    }, 60000);

    // --- KPI state + helpers
    const leadsEl  = document.getElementById('kpi-leads');
    const replyEl  = document.getElementById('kpi-reply');
    const closedEl = document.getElementById('kpi-closed');

    function parseTimeToSeconds(str){
      const m = str.match(/(\d+)m\s+(\d+)s/);
      if(!m) return 132;
      return parseInt(m[1],10)*60 + parseInt(m[2],10);
    }
    function formatTime(seconds){
      const m = Math.floor(seconds/60);
      const s = seconds % 60;
      return `${m}m ${s}s`;
    }

    let kpiState = {
      leads: parseInt(leadsEl.textContent,10) || 8,
      avgReplySec: parseTimeToSeconds(replyEl.textContent || "2m 12s"),
      closed: parseInt(closedEl.textContent,10) || 3
    };
    const closedBase = kpiState.closed;

    function advanceRandomCard(){
      if(!cards.length) return;
      const card = cards[Math.floor(Math.random()*cards.length)];
      const badge = card.querySelector('.badge');
      if(!badge) return;
      let key = badge.getAttribute('data-i18n');
      if(key === 'st_new'){
        key = 'st_wait';
      }else if(key === 'st_wait'){
        key = 'st_sent';
      }else{
        return; // already at follow-up
      }
      badge.setAttribute('data-i18n', key);
      const map = dict[currentLang] || dict.en;
      if(map[key]) badge.textContent = map[key];
      card.classList.remove('pulse'); void card.offsetWidth; card.classList.add('pulse');
      card.setAttribute('data-mins','1');
      const ago = card.querySelector('.ago');
      if(ago) renderAgo(ago,1);
    }

    function pulseOne(){
      // animate one card status
      advanceRandomCard();

      // bump leads today
      const leadsCard = document.getElementById('kpi-card-leads');
      const deltaLeadsEl = document.getElementById('delta-leads');
      const inc = 1 + (Math.random() < 0.3 ? 1 : 0);
      kpiState.leads += inc;
      leadsEl.textContent = kpiState.leads;
      const pct = Math.floor(8 + Math.random()*10);
      deltaLeadsEl.textContent = `+${pct}%`;
      leadsCard.classList.remove('pulse'); void leadsCard.offsetWidth; leadsCard.classList.add('pulse');

      // tweak avg reply time
      const replyCard = document.getElementById('kpi-card-reply');
      const replyDeltaEl = document.getElementById('delta-reply');
      const deltaSec = Math.floor(Math.random()*25) - 12; // -12..+12
      kpiState.avgReplySec = Math.min(360, Math.max(45, kpiState.avgReplySec + deltaSec));
      replyEl.textContent = formatTime(kpiState.avgReplySec);

      replyDeltaEl.classList.remove('up','down','flat');
      let deltaKey = 'flat_vs_yday';
      let deltaClass = 'flat';
      if(deltaSec < -3){
        deltaKey = 'reply_faster';
        deltaClass = 'up';
      }else if(deltaSec > 3){
        deltaKey = 'reply_slower';
        deltaClass = 'down';
      }
      replyDeltaEl.classList.add(deltaClass);
      replyDeltaEl.setAttribute('data-i18n', deltaKey);
      const map = dict[currentLang] || dict.en;
      replyDeltaEl.textContent = map[deltaKey] || dict.en[deltaKey];
      replyCard.classList.remove('pulse'); void replyCard.offsetWidth; replyCard.classList.add('pulse');

      // maybe bump closed today
      const closedCard = document.getElementById('kpi-card-closed');
      if(Math.random() < 0.35){
        kpiState.closed += 1;
        closedEl.textContent = kpiState.closed;
      }
      const diff = kpiState.closed - closedBase;
      const deltaClosedEl = document.getElementById('delta-closed');
      deltaClosedEl.textContent = diff >= 0 ? `+${diff}` : String(diff);
      closedCard.classList.remove('pulse'); void closedCard.offsetWidth; closedCard.classList.add('pulse');

      // subtle subtext tick (hero_sub number)
      const sub = document.getElementById('live-sub');
      if(sub){
        const match = sub.textContent.match(/(\d+)/);
        if(match){
          const n = parseInt(match[1],10) + 1;
          sub.textContent = sub.textContent.replace(/\d+/, String(n));
        }
      }
    }

    // auto pulse every ~140s
    setInterval(pulseOne, 140000);

    // Refresh (demo) button triggers immediate pulse
    document.getElementById('btn-refresh').addEventListener('click', (e)=>{
      e.preventDefault();
      pulseOne();
    });
  </script>
</body>
</html>
