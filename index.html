<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>Kintra — Pilot • Italy</title>
  <meta name="color-scheme" content="light only"/>
  <meta name="theme-color" content="#0b2347"/>
  <link rel="icon" href="./img/logo.png.png"/>

  <style>
    :root{
      --bg:#ffffff; --ink:#0b1220; --muted:#5f6a7c; --line:#e8ecf2;
      --brand:#0b5fff; --navy:#0b2347; --gold:#c9a227; --chip:#eef3ff; --card:#f7f9fc;
      --radius:14px; --max:1100px;
    }
    *{box-sizing:border-box}
    html,body{margin:0;background:var(--bg);color:var(--ink);font:16px/1.55 system-ui,-apple-system,Segoe UI,Roboto,Inter,Helvetica,Arial}
    a{color:var(--navy);text-decoration:none}
    a:hover{text-decoration:underline}
    .wrap{max-width:var(--max);margin:0 auto;padding:26px 22px 60px}
    img{display:block;max-width:100%}

    header{display:flex;align-items:center;justify-content:space-between;gap:16px;margin-bottom:14px}
    .brand{display:flex;align-items:center;gap:10px}
    .brand img{width:28px;height:28px;object-fit:contain;border-radius:6px}
    .badge{padding:4px 10px;border:1px solid var(--line);border-radius:999px;color:#6b7280;font-size:13px}

    /* Language toggle */
    .langbox{display:flex;align-items:center;gap:10px}
    .langbox .label{font-size:14px;color:#6b7280}
    .toggle{display:flex;gap:8px}
    .toggle button{
      display:inline-flex;align-items:center;gap:8px;
      border:1px solid var(--line);background:#fff;border-radius:999px;
      padding:6px 12px;cursor:pointer;font-weight:600;font-size:13px
    }
    .toggle button.active{background:var(--chip);border-color:var(--brand);color:var(--brand)}
    .flag{display:inline-flex;width:18px;height:12px}
    .flag svg{width:18px;height:12px;display:block}

    .hero{display:grid;grid-template-columns:1.15fr .85fr;gap:28px;align-items:center;margin-top:8px}
    h1{font-size:40px;line-height:1.08;margin:0 0 10px;letter-spacing:-.2px;color:var(--navy)}
    .lead{font-size:18px;margin:0 0 10px}
    .sub{color:var(--muted);margin:0 0 14px}
    .cta-row{display:flex;flex-wrap:wrap;gap:10px;margin:12px 0 8px}
    .btn{border:1px solid var(--navy);color:#fff;background:var(--navy);padding:10px 14px;border-radius:12px;cursor:pointer;font-weight:700}
    .btn.alt{background:#fff;color:var(--navy)}
    .btn.ghost{background:#fff;color:var(--navy);border-color:var(--line);font-weight:600}
    .note{font-size:13px;color:var(--muted);margin-top:6px}
    .hr{height:1px;background:var(--line);margin:18px 0}

    .grid-2{display:grid;grid-template-columns:1fr 1fr;gap:22px}
    .card{background:#fff;border:1px solid var(--line);border-radius:var(--radius);padding:16px}
    .card.soft{background:var(--card)}
    .metrics{display:grid;grid-template-columns:repeat(3,1fr);gap:10px;margin-top:6px}
    .metric{background:#fff;border:1px solid var(--line);border-radius:12px;padding:12px;text-align:center}
    .metric .k{font-size:22px;font-weight:800;color:var(--brand)}
    .metric .l{font-size:12px;color:#6b7280}

    /* Pricing strip */
    .pricing{margin-top:10px;font-size:14px;color:#243044}
    .pricing .muted{color:#6b7280}

    /* Gold Advisor plaque */
    .advisor{margin-top:18px;border:1px solid var(--gold);
      background:linear-gradient(0deg, rgba(201,162,39,.08), rgba(201,162,39,.08)), #fff;
      border-radius:12px;padding:14px}
    .advisor b{color:#1b2233}
    .advisor small{color:#6b7280}

    /* Image tiles + captions */
    .shots{display:grid;grid-template-columns:repeat(3,1fr);gap:10px}
    figure.shot{position:relative;margin:0}
    .shot img{width:100%;height:210px;object-fit:cover;border-radius:12px;border:1px solid var(--line);background:#f5f7fb}
    .shot figcaption{font-size:12px;color:#6d778a;margin-top:6px}

    /* Listing Summary composite */
    .listing-mock{border:1px solid var(--line);border-radius:12px;overflow:hidden;background:#fff}
    .lm-head{display:flex;align-items:center;gap:10px;padding:10px 12px;border-bottom:1px solid var(--line);background:linear-gradient(180deg,#fafbfd,#f4f6fa)}
    .lm-dot{width:8px;height:8px;border-radius:50%;background:#e0e5ef}
    .lm-body{display:grid;grid-template-columns:120px 1fr;gap:12px;padding:12px}
    .lm-photo{width:100%;height:92px;object-fit:cover;border:1px solid var(--line);border-radius:10px}
    .lm-meta{display:grid;gap:6px}
    .lm-title{font-weight:800}
    .lm-line{font-size:14px;color:var(--muted)}
    .tagrow{display:flex;gap:6px;flex-wrap:wrap}
    .tag{font-size:12px;color:#234;background:#eef3ff;border:1px solid #dbe7ff;border-radius:999px;padding:4px 8px}

    footer{margin:28px 0 8px;color:var(--muted);font-size:14px;display:flex;justify-content:space-between;gap:10px;flex-wrap:wrap}

    @media (max-width:980px){
      .hero,.grid-2{grid-template-columns:1fr}
      h1{font-size:32px}
      .shot img{height:180px}
      .lm-body{grid-template-columns:100px 1fr}
    }
  </style>
</head>
<body>
  <div class="wrap">

    <!-- Header -->
    <header>
      <div class="brand">
        <img src="./img/logo.png.png" alt="Kintra logo"/>
        <strong>Kintra</strong>
        <span class="badge" id="badge">Pilot • Italy</span>
      </div>

      <div class="langbox">
        <span class="label" id="lang-label">Language</span>
        <div class="toggle">
          <button id="lang-en" class="active">
            <span class="flag" aria-hidden="true">
              <svg viewBox="0 0 60 36">
                <rect width="60" height="36" fill="#012169"/>
                <path d="M0,0 60,36 M60,0 0,36" stroke="#FFF" stroke-width="8"/>
                <path d="M0,0 60,36 M60,0 0,36" stroke="#C8102E" stroke-width="4"/>
                <rect x="25" width="10" height="36" fill="#FFF"/>
                <rect y="13" width="60" height="10" fill="#FFF"/>
                <rect x="27" width="6" height="36" fill="#C8102E"/>
                <rect y="15" width="60" height="6" fill="#C8102E"/>
              </svg>
            </span>
            EN
          </button>
          <button id="lang-it">
            <span class="flag" aria-hidden="true">
              <svg viewBox="0 0 60 36">
                <rect width="60" height="36" fill="#fff"/>
                <rect width="20" height="36" x="0" fill="#009246"/>
                <rect width="20" height="36" x="40" fill="#CE2B37"/>
              </svg>
            </span>
            IT
          </button>
        </div>
      </div>
    </header>

    <!-- HERO -->
    <section class="hero">
      <div>
        <h1 id="h1">From listing to leads, faster</h1>
        <p class="lead" id="lead">AI tools that help agents reply faster and book more viewings — inside WhatsApp.</p>
        <p class="sub" id="sub">Agents waste hours switching tabs. Kintra brings every lead back into one thread, drafts replies, and suggests next steps.</p>

        <div class="cta-row">
          <a class="btn" href="#pilot" id="btn-request">Request Pilot Access</a>
          <a class="btn alt" href="./dashboard.html" id="btn-dash">Preview Dashboard</a>
          <a class="btn ghost" href="./deck.html" id="btn-deck">View Live Deck</a>
          <a class="btn ghost" href="./deck/Kintra_PilotDeck_v1.pdf" target="_blank" id="btn-pdf">View Deck PDF</a>
        </div>

        <!-- Pricing & value framing -->
        <div class="pricing" id="price-line">
          <strong>€1.5–2k pilot (30 days)</strong> · 1 niche · 2–3 KPIs.
          <span class="muted">If it doesn’t save time in 30 days, don’t continue.</span>
        </div>

        <!-- Advisor Charter (gold) -->
        <div class="advisor" id="advisor">
          <b>Advisor Charter (pilot):</b> a light, optional role during the 30-day pilot — review the live preview, sanity-check our focus, and (only if it makes sense) suggest 1–2 warm introductions. <b>Zero operational load; clear upside if the pilot performs.</b>
          <br/><small>We list early advisors by permission only.</small>
        </div>

        <div class="hr"></div>
        <div class="note" id="trust-line">Trusted by Italian agents building faster funnels.</div>
      </div>

      <!-- Why it matters -->
      <div class="card">
        <h3 id="why">Why this matters (time → money)</h3>
        <div class="sub" id="math">If each faster reply saves ~2 minutes, 20 leads = 40 minutes reclaimed — per agent, per day.</div>
        <div class="hr"></div>
        <div class="sub" id="compounds"><em>Every minute saved here compounds by the hour.</em></div>
        <div class="hr"></div>
        <div class="metrics">
          <div class="metric"><div class="k">7</div><div class="l" id="mLeads">New leads today</div></div>
          <div class="metric"><div class="k">11m</div><div class="l" id="mReply">Avg reply time</div></div>
          <div class="metric"><div class="k">5</div><div class="l" id="mVisits">Visits booked</div></div>
        </div>
      </div>
    </section>

    <!-- SEE IT IN ACTION -->
    <section class="grid-2" style="margin-top:14px">
      <div class="card soft">
        <h3 id="waPrev">WhatsApp Smart Reply</h3>
        <div class="sub" id="waDesc">Kintra drafts structured replies and next steps so nothing slips.</div>
        <div class="shots" style="margin-top:10px">
          <figure class="shot">
            <img
              src="./img/whatsapp-reply.png"
              alt="WhatsApp reply preview"
              onerror="if(!this.dataset.try){this.dataset.try=1; this.src='./images/whatsapp-reply.png';}
                       else { this.src='data:image/svg+xml;utf8,&lt;svg xmlns=%22http://www.w3.org/2000/svg%22 width=%22400%22 height=%22260%22&gt;&lt;rect width=%22400%22 height=%22260%22 fill=%22%23f5f7fb%22/&gt;&lt;text x=%2250%22 y=%22140%22 fill=%22%238a94a7%22 font-size=%2216%22 font-family=%22Arial%22&gt;Preview placeholder&lt;/text&gt;&lt;/svg&gt;'; }"
            />
            <figcaption class="note">Auto-draft in Italian, with a suggested next step.</figcaption>
          </figure>

          <figure class="shot">
            <img
              src="./img/dashboard%20preview%20screen.PNG"
              alt="Dashboard mini preview"
              onerror="if(!this.dataset.try){this.dataset.try=1; this.src='./images/dashboard%20preview%20screen.PNG';}
                       else { this.src='./img/dashboard-mini.png'; }"
            />
            <figcaption class="note">Dashboard mini — live preview screenshot</figcaption>
          </figure>

          <figure class="shot">
            <img src="./img/solution.jpg" alt="Illustrative UI placeholder"
                 onerror="this.src='data:image/svg+xml;utf8,&lt;svg xmlns=%22http://www.w3.org/2000/svg%22 width=%22400%22 height=%22260%22&gt;&lt;rect width=%22400%22 height=%22260%22 fill=%22%23f5f7fb%22/&gt;&lt;text x=%2250%22 y=%22140%22 fill=%22%238a94a7%22 font-size=%2216%22 font-family=%22Arial%22&gt;Preview placeholder&lt;/text&gt;&lt;/svg&gt;'">
            <figcaption class="note">Illustrative UI (placeholder)</figcaption>
          </figure>
        </div>
      </div>

      <div class="card soft">
        <h3 id="lsTitle">Listing Summary (composite preview)</h3>
        <div class="sub" id="lsSub">One glance: key details, tags, and next action — ready to send.</div>

        <div class="listing-mock" style="margin-top:10px">
          <div class="lm-head">
            <div class="lm-dot"></div><div class="lm-dot"></div><div class="lm-dot"></div>
            <div style="margin-left:auto;font-size:12px;color:var(--muted)" id="lsHeadRight">Preview</div>
          </div>
          <div class="lm-body">
            <img class="lm-photo" src="./img/cta.jpg" alt="Property thumbnail"
                 onerror="if(!this.dataset.try){this.dataset.try=1; this.src='./images/cta.jpg';}
                          else { this.src='data:image/svg+xml;utf8,&lt;svg xmlns=%22http://www.w3.org/2000/svg%22 width=%22120%22 height=%2292%22&gt;&lt;rect width=%22120%22 height=%2292%22 fill=%22%23e5ebf6%22/&gt;&lt;/svg&gt;'; }"/>
            <div class="lm-meta">
              <div class="lm-title" id="lsTitle2">€420,000 · Bilocale ristrutturato</div>
              <div class="lm-line" id="lsAddr">Navigli, Milano — 80 m² · 2° piano · Ascensore</div>
              <div class="tagrow">
                <span class="tag" id="tag1">2BR</span>
                <span class="tag" id="tag2">80 m²</span>
                <span class="tag" id="tag3">Milano</span>
                <span class="tag" id="tag4">Balcony</span>
              </div>
              <div style="margin-top:8px"><a class="btn" href="./dashboard.html#listing" id="lsChip">View Listing Summary</a></div>
            </div>
          </div>
        </div>

        <div class="card" style="margin-top:12px">
          <h3 id="pulseTitle">Daily pulse (manager view)</h3>
          <div class="metrics">
            <div class="metric"><div class="k">7</div><div class="l" id="mLeads2">New leads today</div></div>
            <div class="metric"><div class="k">11m</div><div class="l" id="mReply2">Avg reply time</div></div>
            <div class="metric"><div class="k">5</div><div class="l" id="mVisits2">Visits booked</div></div>
          </div>
        </div>
      </div>
    </section>

    <!-- WHATSAPP META DEMO + PILOT -->
    <section class="grid-2" id="pilot" style="margin-top:16px">
      <div class="card">
        <h3 id="pilotTitle">Start your 30-Day Pilot Charter</h3>
        <div class="sub" id="pilotSub">Light setup. Quick value. If it works for you, continue; if not, stop — zero risk.</div>
        <div style="display:grid;gap:10px;margin-top:10px">
          <input id="name" placeholder="Name (e.g. Alex Rossi)"/>
          <input id="email" placeholder="Work email (e.g. alex.rossi@agency.it)"/>
          <textarea id="wf" placeholder="What’s your current workflow? (e.g. inbound via WhatsApp + email, want faster replies…)"></textarea>
        </div>
        <div class="cta-row" style="margin-top:10px">
          <a class="btn" href="mailto:pilot@kintra.xyz" id="btnStart">→ Start My Pilot</a>
          <span class="note" id="noSpam">No spam. Limited early access.</span>
        </div>
      </div>

      <div class="card">
        <h3 id="waSend">Send via WhatsApp (Meta demo)</h3>
        <div class="sub" id="waSendSub">Uses Meta Cloud API (test number) to send a real message.</div>
        <div class="hr"></div>
        <div style="display:grid;grid-template-columns:1fr 1fr;gap:10px">
          <div>
            <label for="phone" id="labPhone" class="sub">Recipient phone (E.164)</label>
            <input id="phone" placeholder="+39…"/>
          </div>
          <div>
            <label for="msg" id="labMsg" class="sub">Message</label>
            <input id="msg" placeholder="Ciao from the Kintra pilot!"/>
          </div>
        </div>
        <div class="cta-row" style="margin-top:8px">
          <button class="btn" id="sendWA">Send WhatsApp</button>
          <button class="btn ghost" id="revealTestNum">Reveal test number</button>
          <span class="note" id="testNumWrap" style="display:none">
            <strong id="testNum">+39 ••• •• ••••</strong>
            <button id="copyTestNum" class="btn ghost" style="margin-left:6px">Copy</button>
          </span>
        </div>
        <div class="note" id="waTip" style="margin-top:6px">Tip: The recipient must first say “hello” to the test number.</div>
        <div class="note" id="publicNote" style="margin-top:6px">For public visitors, we hide the number to reduce spam. Partners get a dedicated sandbox.</div>
        <pre id="waResult" class="card" style="margin-top:10px;white-space:pre-wrap;background:#fff">—</pre>
      </div>
    </section>

    <footer>
      <div id="world">🌍 From Italy to the world — join the next wave.</div>
      <div>© 2025 Kintra — <span>Pilot inquiries: <a href="mailto:pilot@kintra.xyz">pilot@kintra.xyz</a></span></div>
    </footer>
  </div>

  <script>
    // ---- Config ----
    const WA_WORKER = 'https://kintra-wa-meta.founder-60b.workers.dev';
    const TEST_NUMBER = '+39 3XX XXX XXXX'; // replace when you have the sandbox

    // ---- EN / IT copy ----
    const dict = {
      en:{
        badge:'Pilot • Italy',
        langLabel:'Language',
        h1:'From listing to leads, faster',
        lead:'AI tools that help agents reply faster and book more viewings — inside WhatsApp.',
        sub:'Agents waste hours switching tabs. Kintra brings every lead back into one thread, drafts replies, and suggests next steps.',
        btnRequest:'Request Pilot Access', btnDash:'Preview Dashboard', btnDeck:'View Live Deck', btnPDF:'View Deck PDF',
        priceLineStrong:'€1.5–2k pilot (30 days) · 1 niche · 2–3 KPIs.',
        priceTail:'If it doesn’t save time in 30 days, don’t continue.',
        advisorHead:'Advisor Charter (pilot):',
        advisorCopy:'a light, optional role during the 30-day pilot — review the live preview, sanity-check our focus, and (only if it makes sense) suggest 1–2 warm introductions. Zero operational load; clear upside if the pilot performs.',
        advisorPerm:'We list early advisors by permission only.',
        trust:'Trusted by Italian agents building faster funnels.',
        why:'Why this matters (time → money)',
        math:'If each faster reply saves ~2 minutes, 20 leads = 40 minutes reclaimed — per agent, per day.',
        compounds:'Every minute saved here compounds by the hour.',
        waPrev:'WhatsApp Smart Reply',
        waDesc:'Kintra drafts structured replies and next steps so nothing slips.',
        lsTitle:'Listing Summary (composite preview)',
        lsSub:'One glance: key details, tags, and next action — ready to send.',
        lsHeadRight:'Preview',
        tag1:'2BR', tag2:'80 m²', tag3:'Milano', tag4:'Balcony',
        lsChip:'View Listing Summary',
        pulseTitle:'Daily pulse (manager view)',
        mLeads:'New leads today', mReply:'Avg reply time', mVisits:'Visits booked',
        pilotTitle:'Start your 30-Day Pilot Charter',
        pilotSub:'Light setup. Quick value. If it works for you, continue; if not, stop — zero risk.',
        btnStart:'→ Start My Pilot', noSpam:'No spam. Limited early access.',
        waSend:'Send via WhatsApp (Meta demo)', waSendSub:'Uses Meta Cloud API (test number) to send a real message.',
        labPhone:'Recipient phone (E.164)', labMsg:'Message',
        waTip:'Tip: The recipient must first say “hello” to the test number.',
        revealBtn:'Reveal test number', copyBtn:'Copy', copied:'Copied', copyFail:'Copy failed',
        publicNote:'For public visitors, we hide the number to reduce spam. Partners get a dedicated sandbox.',
        world:'🌍 From Italy to the world — join the next wave.'
      },
      it:{
        badge:'Pilot • Italia',
        langLabel:'Lingua',
        h1:'Dall’annuncio ai lead, più velocemente',
        lead:'Strumenti che aiutano gli agenti a rispondere più in fretta e fissare più visite — dentro WhatsApp.',
        sub:'Gli agenti perdono tempo passando da una scheda all’altra. Kintra riporta ogni lead in un unico thread, redige bozze e suggerisce i prossimi passi.',
        btnRequest:'Richiedi il Pilot', btnDash:'Anteprima Dashboard', btnDeck:'Vedi Deck Live', btnPDF:'Scarica Deck PDF',
        priceLineStrong:'Pilot €1,5–2k (30 giorni) · 1 nicchia · 2–3 KPI.',
        priceTail:'Se in 30 giorni non fa risparmiare tempo, non si continua.',
        advisorHead:'Advisor Charter (pilot):',
        advisorCopy:'ruolo leggero e opzionale nei 30 giorni — rivedere l’anteprima live, validare il focus e (solo se ha senso) suggerire 1–2 warm intro. Zero carico operativo; upside chiaro se il pilot performa.',
        advisorPerm:'Gli advisor iniziali sono elencati solo su autorizzazione.',
        trust:'Scelto da agenti italiani che costruiscono funnel più veloci.',
        why:'Perché conta (tempo → denaro)',
        math:'Se ogni risposta più rapida fa risparmiare ~2 minuti, 20 lead = 40 minuti recuperati — per agente, al giorno.',
        compounds:'Ogni minuto risparmiato qui si moltiplica nell’arco della giornata.',
        waPrev:'Smart Reply su WhatsApp',
        waDesc:'Kintra prepara risposte strutturate e prossime azioni: non sfugge nulla.',
        lsTitle:'Listing Summary (anteprima composita)',
        lsSub:'A colpo d’occhio: dati chiave, tag e prossima azione — pronti da inviare.',
        lsHeadRight:'Anteprima',
        tag1:'2 locali', tag2:'80 m²', tag3:'Milano', tag4:'Balcone',
        lsChip:'Apri Listing Summary',
        pulseTitle:'Polso giornaliero (vista manager)',
        mLeads:'Nuovi lead oggi', mReply:'Tempo medio di risposta', mVisits:'Visite prenotate',
        pilotTitle:'Avvia il tuo Pilot Charter (30 giorni)',
        pilotSub:'Setup leggero. Valore rapido. Se funziona, continui; altrimenti, stop — rischio zero.',
        btnStart:'→ Avvia il mio Pilot', noSpam:'Niente spam. Accesso anticipato limitato.',
        waSend:'Invia via WhatsApp (demo Meta)', waSendSub:'Usa Meta Cloud API (numero di test) per inviare un messaggio reale.',
        labPhone:'Telefono destinatario (E.164)', labMsg:'Messaggio',
        waTip:'Nota: il destinatario deve prima inviare “hello” al numero di test.',
        revealBtn:'Mostra numero di test', copyBtn:'Copia', copied:'Copiato', copyFail:'Copia non riuscita',
        publicNote:'Per i visitatori pubblici nascondiamo il numero per ridurre lo spam. I partner hanno una sandbox dedicata.',
        world:'🌍 Dall’Italia al mondo — unisciti alla prossima ondata.'
      }
    };

    const $ = s => document.querySelector(s);

    function setLang(lang){
      const d = dict[lang] || dict.en;
      document.documentElement.lang = lang;

      // header
      $('#badge').textContent = d.badge;
      $('#lang-label').textContent = d.langLabel;

      // hero
      $('#h1').textContent = d.h1;
      $('#lead').textContent = d.lead;
      $('#sub').textContent = d.sub;
      $('#btn-request').textContent = d.btnRequest;
      $('#btn-dash').textContent = d.btnDash;
      $('#btn-deck').textContent = d.btnDeck;
      $('#btn-pdf').textContent  = d.btnPDF;

      // price/advisor/trust
      $('#price-line').innerHTML = `<strong>${d.priceLineStrong}</strong> <span class="muted">${d.priceTail}</span>`;
      $('#advisor').innerHTML = `<b>${d.advisorHead}</b> ${d.advisorCopy} <br/><small>${d.advisorPerm}</small>`;
      $('#trust-line').textContent = d.trust;

      // why/metrics labels
      $('#why').textContent = d.why;
      $('#math').textContent = d.math;
      $('#compounds').textContent = d.compounds;
      $('#mLeads').textContent  = d.mLeads; $('#mReply').textContent  = d.mReply; $('#mVisits').textContent  = d.mVisits;
      $('#mLeads2').textContent = d.mLeads; $('#mReply2').textContent = d.mReply; $('#mVisits2').textContent = d.mVisits;

      // see it in action
      $('#waPrev').textContent = d.waPrev;
      $('#waDesc').textContent = d.waDesc;

      // listing summary labels
      $('#lsTitle').textContent = d.lsTitle; $('#lsSub').textContent = d.lsSub; $('#lsHeadRight').textContent = d.lsHeadRight;
      $('#tag1').textContent = d.tag1; $('#tag2').textContent = d.tag2; $('#tag3').textContent = d.tag3; $('#tag4').textContent = d.tag4;
      $('#lsChip').textContent = d.lsChip;

      // pilot form
      $('#pilotTitle').textContent = d.pilotTitle;
      $('#pilotSub').textContent   = d.pilotSub;
      $('#btnStart').textContent   = d.btnStart;
      $('#noSpam').textContent     = d.noSpam;

      // WA demo labels
      $('#waSend').textContent     = d.waSend;
      $('#waSendSub').textContent  = d.waSendSub;
      $('#labPhone').textContent   = d.labPhone;
      $('#labMsg').textContent     = d.labMsg;
      $('#waTip').textContent      = d.waTip;
      $('#publicNote').textContent = d.publicNote;
      $('#revealTestNum').textContent = d.revealBtn;
      $('#copyTestNum').textContent   = d.copyBtn;

      // footer
      $('#world').textContent = d.world;

      // active state
      $('#lang-en').classList.toggle('active', lang==='en');
      $('#lang-it').classList.toggle('active', lang==='it');

      try{ localStorage.setItem('kintra_lang', lang); }catch(e){}
    }

    // Bind toggles
    $('#lang-en').onclick = ()=> setLang('en');
    $('#lang-it').onclick = ()=> setLang('it');
    setLang(localStorage.getItem('kintra_lang') || 'en');

    // Reveal/copy test number
    const revealBtn = $('#revealTestNum');
    const testWrap  = $('#testNumWrap');
    const testNumEl = $('#testNum');
    const copyBtn   = $('#copyTestNum');
    if (revealBtn){
      revealBtn.onclick = () => {
        testNumEl.textContent = TEST_NUMBER;
        testWrap.style.display = 'inline';
        revealBtn.style.display = 'none';
      };
    }
    if (copyBtn){
      copyBtn.onclick = async () => {
        const lang = document.documentElement.lang || 'en';
        try {
          await navigator.clipboard.writeText(TEST_NUMBER);
          copyBtn.textContent = dict[lang].copied;
        } catch {
          copyBtn.textContent = dict[lang].copyFail;
        }
        setTimeout(()=> copyBtn.textContent = dict[lang].copyBtn, 1500);
      };
    }

    // WhatsApp demo send
    const waBtn = $('#sendWA'), waOut = $('#waResult');
    if(waBtn){
      waBtn.onclick = async ()=>{
        const to = ($('#phone').value||'').trim() || TEST_NUMBER.replace(/\s+/g,'');
        const text = ($('#msg').value||'').trim() || 'Ciao from the Kintra pilot!';
        waOut.textContent = 'Sending…';
        try{
          const res = await fetch(WA_WORKER + '/api/wa', {
            method:'POST', headers:{'Content-Type':'application/json'},
            body: JSON.stringify({ to, text })
          });
          const txt = await res.text();
          let json; try{ json = JSON.parse(txt); }catch{ json = { raw: txt }; }
          if(!res.ok) throw new Error(json?.metaErr?.message || txt);
          waOut.textContent = JSON.stringify(json, null, 2);
        }catch(e){
          waOut.textContent = 'Error: ' + e.message;
        }
      };
    }
  </script>
</body>
</html>
