<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>Kintra ‚Äî Pilot Charter ‚Ä¢ Italy</title>
  <meta name="color-scheme" content="light only"/>
  <meta name="theme-color" content="#0b2347"/>
  <link rel="icon" href="./img/logo.png.png"/>

  <style>
    :root{
      --bg:#ffffff; --ink:#0b1220; --muted:#525e72; --line:#e8ecf2;
      --brand:#0b5fff; --navy:#0b2347; --gold:#c9a227; --card:#f7f9fc; --chip:#eef3ff;
      --radius:14px; --max:1100px;
    }
    *{box-sizing:border-box}
    html,body{margin:0;background:var(--bg);color:var(--ink);font:16px/1.55 system-ui,-apple-system,Segoe UI,Roboto,Inter,Helvetica,Arial}
    a{color:var(--brand);text-decoration:none}
    a:hover{text-decoration:underline}
    img{display:block;max-width:100%}
    .wrap{max-width:var(--max);margin:0 auto;padding:26px 22px 60px}

    /* Header */
    header{display:flex;align-items:center;justify-content:space-between;gap:16px;margin-bottom:14px}
    .brand{display:flex;align-items:center;gap:10px}
    .brand img{width:28px;height:28px;object-fit:contain;border-radius:6px}
    .brand .name{font-weight:800;letter-spacing:.2px}
    .badge{padding:4px 10px;border:1px solid var(--line);border-radius:999px;color:#6b7280;font-size:13px}

    /* Language */
    .langbox{display:flex;align-items:center;gap:10px}
    .langbox .label{font-size:14px;color:#6b7280}
    .toggle{display:inline-flex;border:1px solid var(--line);border-radius:999px;overflow:hidden}
    .toggle button{
      display:inline-flex;align-items:center;gap:8px;padding:6px 12px;cursor:pointer;
      background:#fff;border:0;border-right:1px solid var(--line);font-weight:600
    }
    .toggle button:last-child{border-right:0}
    .toggle button.active{background:var(--chip);border-color:var(--brand);color:var(--brand)}
    .flag{display:inline-flex;width:18px;height:12px}
    .flag svg{width:18px;height:12px;display:block}

    /* Hero */
    .hero{display:grid;grid-template-columns:1.15fr .85fr;gap:28px;align-items:center;margin-top:8px}
    h1{font-size:40px;line-height:1.08;margin:0 0 10px;letter-spacing:-.2px;color:var(--navy)}
    .lead{font-size:18px;color:#243044;margin:0 0 10px}
    .sub{color:var(--muted);margin:0 0 14px}
    .cta-row{display:flex;flex-wrap:wrap;gap:10px;margin:12px 0 6px}
    .btn{border:1px solid var(--line);background:#fff;border-radius:10px;padding:10px 14px;cursor:pointer;font-weight:600}
    .btn.primary{background:var(--brand);border-color:var(--brand);color:#fff}

    .hr{height:1px;background:var(--line);margin:18px 0}

    /* Cards & grids */
    .grid-2{display:grid;grid-template-columns:1fr 1fr;gap:22px}
    .card{background:#fff;border:1px solid var(--line);border-radius:var(--radius);padding:16px}
    .card.soft{background:var(--card)}
    .divider{height:1px;background:var(--line);margin:18px 0}

    /* Pricing strip */
    .pricing{margin-top:10px;font-size:14px;color:#243044}
    .pricing .muted{color:#6b7280}

    /* Advisor Charter gold plaque */
    .gold{
      margin:10px 0 0;background:linear-gradient(180deg, rgba(234,210,139,.35), rgba(234,210,139,.15));
      border:1px solid #e6d59a;border-radius:14px;padding:14px 16px;box-shadow:0 6px 18px rgba(201,162,39,.12)
    }
    .gold h3{margin:0 0 6px;color:#5e4a12;font-size:18px;letter-spacing:.2px}
    .gold p{margin:4px 0;color:#5a533b}

    /* ‚ÄúTrusted by‚Äù kicker */
    .kicker{border-left:3px solid var(--gold);padding-left:12px;background:linear-gradient(90deg, rgba(201,162,39,0.08), transparent);border-radius:6px;margin-top:10px}

    /* WhatsApp Smart Reply specific */
    .tabs{display:inline-flex;border:1px solid var(--line);border-radius:10px;overflow:hidden}
    .tab{padding:6px 10px;cursor:pointer;background:#fff;border-right:1px solid var(--line);font-weight:600}
    .tab:last-child{border-right:0}
    .tab.active{background:var(--chip);color:var(--brand);border-color:var(--brand)}
    .meta-row{display:flex;gap:10px;flex-wrap:wrap;font-size:12px;color:#6b7280;margin-top:6px}
    .pill{display:inline-flex;align-items:center;gap:6px;border:1px solid var(--line);background:#fff;border-radius:999px;padding:4px 8px}
    .dot{width:8px;height:8px;border-radius:50%}
    .dot.client{background:#7c8799}
    .dot.agent{background:#0b5fff}
    .dot.ai{background:#2a7a37}
    .wa-wrap{border:1px solid var(--line);border-radius:12px;overflow:hidden;background:#f6fbf7}
    .wa-bar{display:flex;align-items:center;gap:8px;padding:8px 12px;background:#eefaf3;border-bottom:1px solid var(--line)}
    .wa-dot{width:8px;height:8px;border-radius:50%;background:#bfead1}
    .wa-body{padding:14px;display:flex;flex-direction:column;gap:10px;background:#f9fdf9}
    .bubble{max-width:78%;padding:10px 12px;border-radius:14px;line-height:1.25;font-size:14px;border:1px solid var(--line)}
    .bubble.client{align-self:flex-start;background:#fff;border-color:#e6efe7;color:#2b3a2e}
    .bubble.agent{align-self:flex-end;background:#e8f1ff;border-color:#d7e6ff;color:#153a75}
    .bubble.ai{align-self:flex-end;background:#e9fbea;border-color:#cfe9d6;color:#1e3f2b}

    /* Listing composite */
    .listing-mock{border:1px solid var(--line);border-radius:12px;overflow:hidden;background:#fff}
    .lm-head{display:flex;align-items:center;gap:10px;padding:10px 12px;border-bottom:1px solid var(--line);background:linear-gradient(180deg,#fafbfd,#f4f6fa)}
    .lm-dot{width:8px;height:8px;border-radius:50%;background:#e0e5ef}
    .lm-body{display:grid;grid-template-columns:120px 1fr;gap:12px;padding:12px}
    .lm-photo-img{width:100%;height:92px;object-fit:cover;border:1px solid var(--line);border-radius:10px;display:block}
    .lm-meta{display:grid;gap:6px}
    .lm-title{font-weight:800}
    .lm-line{font-size:14px;color:var(--muted)}
    .tagrow{display:flex;gap:6px;flex-wrap:wrap}
    .tag{font-size:12px;color:#234;background:#eef3ff;border:1px solid #dbe7ff;border-radius:999px;padding:4px 8px}
    .caption{margin-top:6px;font-size:12px;color:#7b879b}

    /* Mini metrics (used twice) */
    .metrics{display:grid;grid-template-columns:repeat(3,1fr);gap:10px;margin-top:6px}
    .metric{background:#fff;border:1px solid var(--line);border-radius:12px;padding:12px;text-align:center}
    .metric .k{font-size:22px;font-weight:800;color:var(--brand)}
    .metric .l{font-size:12px;color:#6b7280}

    /* Form */
    .form{display:grid;grid-template-columns:1fr 1fr;gap:10px}
    .form textarea{grid-column:1/-1;min-height:84px}
    input,textarea{width:100%;border:1px solid var(--line);border-radius:10px;padding:10px 12px;font:inherit}
    input::placeholder,textarea::placeholder{color:#9aa3b2}

    /* Footer */
    footer{margin-top:24px;font-size:13px;color:#6b7280;display:flex;justify-content:space-between;gap:12px;flex-wrap:wrap}

    @media (max-width:980px){
      .hero,.grid-2{grid-template-columns:1fr}
      h1{font-size:34px}
      .lm-body{grid-template-columns:100px 1fr}
    }
  </style>
</head>
<body>
  <div class="wrap">
    <!-- Header -->
    <header>
      <div class="brand">
        <img src="./img/logo.png.png" alt="Kintra logo"/>
        <div class="name">Kintra</div>
        <span class="badge" id="badge">Pilot ‚Ä¢ Italy</span>
      </div>

      <div class="langbox">
        <span class="label" id="lang-label">Language</span>
        <div class="toggle">
          <button id="lang-en" class="active" aria-pressed="true">
            <span class="flag" aria-hidden="true">
              <!-- UK flag -->
              <svg viewBox="0 0 60 36">
                <rect width="60" height="36" fill="#012169"/>
                <path d="M0,0 60,36 M60,0 0,36" stroke="#FFF" stroke-width="8"/>
                <path d="M0,0 60,36 M60,0 0,36" stroke="#C8102E" stroke-width="4"/>
                <rect x="25" width="10" height="36" fill="#FFF"/>
                <rect y="13" width="60" height="10" fill="#FFF"/>
                <rect x="27" width="6" height="36" fill="#C8102E"/>
                <rect y="15" width="60" height="6" fill="#C8102E"/>
              </svg>
            </span>
            EN
          </button>
          <button id="lang-it" aria-pressed="false">
            <span class="flag" aria-hidden="true">
              <!-- Italy flag -->
              <svg viewBox="0 0 60 36">
                <rect width="60" height="36" fill="#fff"/>
                <rect width="20" height="36" x="0" fill="#009246"/>
                <rect width="20" height="36" x="40" fill="#CE2B37"/>
              </svg>
            </span>
            IT
          </button>
        </div>
      </div>
    </header>

    <!-- HERO -->
    <section class="hero">
      <div>
        <h1 id="h1">From listing to leads, faster</h1>
        <p class="lead" id="lead">AI tools that help agents reply faster and book more viewings ‚Äî inside WhatsApp.</p>
        <p class="sub" id="sub">Agents waste hours switching tabs. Kintra brings every lead back into one thread, drafts replies, and suggests next steps.</p>

        <div class="cta-row">
          <a class="btn primary" href="#pilot" id="btn-request">Request Pilot Access</a>
          <a class="btn" href="./dashboard.html" id="btn-dash">Preview Dashboard</a>
          <a class="btn" href="./deck.html" id="btn-deck">View Live Deck</a>
          <a class="btn" href="./deck/Kintra_PilotDeck_v1.pdf" id="btn-pdf" target="_blank">View Deck PDF</a>
        </div>

        <div class="pricing" id="price-line">
          <strong>‚Ç¨1.5‚Äì2k pilot (30 days)</strong> ¬∑ 1 niche ¬∑ 2‚Äì3 KPIs.
          <span class="muted" id="price-tail">Focus on one property type; agree 2‚Äì3 success metrics.</span>
        </div>

        <div class="gold" style="margin-top:12px">
          <h3 id="goldH3">Advisor Charter (Pilot)</h3>
          <p id="goldP1">We‚Äôre inviting a select circle of early advisors to preview Kintra before launch.</p>
          <p id="goldP2">The role is light but meaningful: look at the live preview, give a quick steer, and (only if it makes sense) open 1‚Äì2 trusted doors.</p>
          <p id="goldP3"><b>Zero operational load; clear upside if the pilot performs.</b> We list early advisors by permission only.</p>
        </div>

        <div class="kicker" id="trust-line" style="margin-top:10px">Trusted by Italian agents building faster funnels.</div>
      </div>

      <!-- Why it matters -->
      <div class="card">
        <h3 id="why">Why this matters (time ‚Üí money)</h3>
        <div class="sub" id="math">If each faster reply saves ~2 minutes, 20 leads = 40 minutes reclaimed ‚Äî per agent, per day.</div>
        <div class="divider"></div>
        <div class="sub" id="compounds"><b>Every minute saved here compounds by the hour.</b></div>
        <div class="divider"></div>
        <div class="metrics">
          <div class="metric"><div class="k">7</div><div class="l" id="m1">New leads today</div></div>
          <div class="metric"><div class="k">11m</div><div class="l" id="m2">Avg reply time</div></div>
          <div class="metric"><div class="k">5</div><div class="l" id="m3">Visits booked</div></div>
        </div>
      </div>
    </section>

    <!-- SEE IT IN ACTION -->
    <section class="grid-2" style="margin-top:14px">
      <!-- WhatsApp Smart Reply (improved) -->
      <section class="card soft" id="wa-card">
        <div style="display:flex;justify-content:space-between;align-items:center;gap:8px">
          <h3 id="waPrev" style="margin:0">WhatsApp Smart Reply</h3>
          <div class="tabs" role="tablist" aria-label="Before / After">
            <button class="tab active" id="tab-before" role="tab" aria-selected="true">Before</button>
            <button class="tab" id="tab-after" role="tab" aria-selected="false">After</button>
          </div>
        </div>
        <p class="sub" id="waDesc" style="margin-top:6px">Kintra drafts structured replies and next steps so nothing slips.</p>

        <!-- Legend -->
        <div class="meta-row" style="margin-bottom:8px">
          <span class="pill" title="Incoming customer message"><span class="dot client"></span><span id="legendClient">Client</span></span>
          <span class="pill" title="AI auto-draft"><span class="dot ai"></span><span id="legendAI">Kintra (AI)</span></span>
          <span class="pill" title="Agent approves & sends"><span class="dot agent"></span><span id="legendAgent">Agent</span></span>
        </div>

        <!-- Keys row -->
        <div class="meta-row" id="wa-keys" style="margin-bottom:8px">
          <span class="pill"><span class="dot client"></span><span id="key1">Client ‚Üí inbound message</span></span>
          <span class="pill"><span class="dot ai"></span><span id="key2">Kintra ‚Üí detects intent & drafts reply</span></span>
          <span class="pill"><span class="dot agent"></span><span id="key3">Agent ‚Üí approves & sends</span></span>
        </div>

        <!-- WA shell -->
        <div class="wa-wrap" aria-live="polite">
          <div class="wa-bar">
            <div class="wa-dot"></div><div class="wa-dot"></div><div class="wa-dot"></div>
            <div style="margin-left:auto;font-size:12px;color:#4b5563" id="waTopLabel">Manual reply ~2‚Äì4 min</div>
          </div>
          <div class="wa-body" id="waBody"><!-- filled by JS --></div>
        </div>
      </section>

      <!-- Dashboard mini -->
      <section class="card">
        <div style="display:flex;justify-content:space-between;align-items:center;gap:8px">
          <div>
            <h3>Dashboard Mini (live preview)</h3>
            <p class="sub">Managers get a daily pulse at a glance.</p>
          </div>
          <a class="btn" href="./dashboard.html">Open Dashboard</a>
        </div>
        <img src="./img/dashboard%20preview%20screen.PNG" alt="Dashboard mini preview"
             style="width:100%;height:210px;object-fit:cover;border-radius:12px;border:1px solid var(--line);margin-top:8px"/>
        <div class="metrics">
          <div class="metric"><div class="k">65%</div><div class="l">Reply within 1h</div></div>
          <div class="metric"><div class="k">11m</div><div class="l">Avg reply time</div></div>
          <div class="metric"><div class="k">5</div><div class="l">Visits booked</div></div>
        </div>
        <figcaption class="caption">Real metrics from the pilot dashboard.</figcaption>
      </section>
    </section>

    <!-- Listing Summary -->
    <section class="card soft" style="margin-top:16px">
      <h3 id="lsTitle">Listing Summary (composite preview)</h3>
      <p class="sub" id="lsSub">One glance: key details, tags, and next action ‚Äî ready to send.</p>

      <div class="listing-mock" style="margin-top:10px">
        <div class="lm-head">
          <div class="lm-dot"></div><div class="lm-dot"></div><div class="lm-dot"></div>
          <div style="margin-left:auto;font-size:12px;color:var(--muted)" id="lsHeadRight">Preview</div>
        </div>
        <div class="lm-body">
          <img class="lm-photo-img"
               src="./img/cta.jpg"
               alt="Property thumbnail"
               onerror="this.src='./images/cta.jpg'"/>
          <div class="lm-meta">
            <div class="lm-title" id="lsTitle2">‚Ç¨420,000 ¬∑ Bilocale ristrutturato</div>
            <div class="lm-line" id="lsAddr">Navigli, Milano ‚Äî 80 m¬≤ ¬∑ 2¬∞ piano ¬∑ Ascensore</div>
            <div class="tagrow">
              <span class="tag" id="tag1">2BR</span>
              <span class="tag" id="tag2">80 m¬≤</span>
              <span class="tag" id="tag3">Milano</span>
              <span class="tag" id="tag4">Balcony</span>
            </div>
            <div style="margin-top:8px">
              <a class="btn" href="./listing.html" id="lsChip">View Listing Summary</a>
            </div>
          </div>
        </div>
      </div>
      <figcaption class="caption">Composite card agents can drop into WhatsApp or email.</figcaption>
    </section>

    <!-- WhatsApp send (Meta demo) -->
    <section class="card" style="margin-top:16px">
      <h3 id="wa-send">Send via WhatsApp (Meta demo)</h3>
      <p class="sub" id="wa-send-sub">Uses Meta Cloud API (test number) to send a real message.</p>
      <div class="grid-2" style="margin-top:8px">
        <div>
          <div class="form" style="grid-template-columns:1fr 1fr">
            <div>
              <label id="lab-phone">Recipient phone (E.164)</label>
              <input id="phone" placeholder="+39‚Ä¶"/>
            </div>
            <div>
              <label id="lab-msg">Message</label>
              <input id="msg" placeholder="Ciao from the Kintra pilot!"/>
            </div>
          </div>
          <div class="cta-row" style="margin-top:8px">
            <button class="btn" id="sendWA">Send WhatsApp</button>
            <span class="muted" id="waTip" style="align-self:center">
              Tip: The recipient must first say ‚Äúhello‚Äù to the test number.
              <button id="revealTestNum" class="btn" style="margin-left:8px">Reveal test number</button>
              <span id="testNumWrap" class="muted" style="display:none;margin-left:8px">
                <strong id="testNum">+39 ‚Ä¢‚Ä¢‚Ä¢ ‚Ä¢‚Ä¢ ‚Ä¢‚Ä¢‚Ä¢‚Ä¢</strong>
                <button id="copyTestNum" class="btn" style="margin-left:6px">Copy</button>
              </span>
            </span>
          </div>
          <div class="muted" id="publicNote" style="margin-top:6px">
            For public visitors, we hide the number to reduce spam. Partners get a dedicated sandbox.
          </div>
        </div>
        <div>
          <img src="./img/cta.jpg" alt="Meta Cloud art"
               style="width:100%;height:210px;object-fit:cover;border-radius:12px;border:1px solid var(--line)"/>
        </div>
      </div>
      <pre id="waResult" class="card" style="margin-top:10px;white-space:pre-wrap;background:#fff"></pre>
    </section>

    <!-- Pilot form -->
    <section id="pilot" class="card" style="margin-top:16px">
      <h3 id="pilotTitle">Start your 30-Day Pilot Charter</h3>
      <p class="sub" id="pilotSub">Light setup. Quick value. If it works for you, continue; if not, stop ‚Äî zero risk.</p>
      <div class="form" style="margin-top:10px">
        <input id="name" placeholder="Name ‚Äî e.g. Alex Rossi"/>
        <input id="email" placeholder="Work email ‚Äî e.g. alex.rossi@agency.it"/>
        <textarea id="wf" placeholder="What‚Äôs your current workflow? (e.g. inbound via WhatsApp + email, want faster replies‚Ä¶)"></textarea>
      </div>
      <div class="cta-row" style="margin-top:12px">
        <a class="btn primary" href="mailto:pilot@kintra.xyz" id="btnStart">‚Üí Start My Pilot</a>
        <span class="muted" id="noSpam" style="align-self:center">No spam. Limited early access.</span>
      </div>
    </section>

    <footer>
      <div id="world">üåç From Italy to the world ‚Äî join the next wave.</div>
      <div>¬© 2025 Kintra. <span id="foot-mail">Pilot inquiries: <a href="mailto:pilot@kintra.xyz">pilot@kintra.xyz</a></span></div>
    </footer>
  </div>

  <script>
    // --- Minimal EN/IT dictionary for page copy ---
    const dict = {
      en:{
        badge:"Pilot ‚Ä¢ Italy",
        h1:"From listing to leads, faster",
        lead:"AI tools that help agents reply faster and book more viewings ‚Äî inside WhatsApp.",
        sub:"Agents waste hours switching tabs. Kintra brings every lead back into one thread, drafts replies, and suggests next steps.",
        btnRequest:"Request Pilot Access", btnDash:"Preview Dashboard", btnDeck:"View Live Deck", btnPDF:"View Deck PDF",
        priceTail:"Focus on one property type; agree 2‚Äì3 success metrics.",
        goldH3:"Advisor Charter (Pilot)",
        goldP1:"We‚Äôre inviting a select circle of early advisors to preview Kintra before launch.",
        goldP2:"The role is light but meaningful: look at the live preview, give a quick steer, and (only if it makes sense) open 1‚Äì2 trusted doors.",
        goldP3:"Zero operational load; clear upside if the pilot performs. We list early advisors by permission only.",
        trust:"Trusted by Italian agents building faster funnels.",
        why:"Why this matters (time ‚Üí money)",
        math:"If each faster reply saves ~2 minutes, 20 leads = 40 minutes reclaimed ‚Äî per agent, per day.",
        compounds:"Every minute saved here compounds by the hour.",
        lsTitle:"Listing Summary (composite preview)",
        lsSub:"One glance: key details, tags, and next action ‚Äî ready to send.",
        lsHeadRight:"Preview",
        lsChip:"View Listing Summary",
        pilotTitle:"Start your 30-Day Pilot Charter",
        pilotSub:"Light setup. Quick value. If it works for you, continue; if not, stop ‚Äî zero risk.",
        noSpam:"No spam. Limited early access.",
        waSend:"Send via WhatsApp (Meta demo)",
        waSendSub:"Uses Meta Cloud API (test number) to send a real message.",
        labPhone:"Recipient phone (E.164)", labMsg:"Message",
        tipText:'Tip: The recipient must first say ‚Äúhello‚Äù to the test number.',
        revealBtn:'Reveal test number', copyBtn:'Copy', copied:'Copied', copyFail:'Copy failed',
        publicNote:'For public visitors, we hide the number to reduce spam. Partners get a dedicated sandbox.',
        langLabel:"Language"
      },
      it:{
        badge:"Pilot ‚Ä¢ Italia",
        h1:"Dall‚Äôannuncio ai lead, pi√π velocemente",
        lead:"Strumenti che aiutano gli agenti a rispondere pi√π in fretta e fissare pi√π visite ‚Äî dentro WhatsApp.",
        sub:"Gli agenti perdono ore cambiando scheda. Kintra riporta ogni lead in un unico thread, redige bozze e suggerisce i prossimi passi.",
        btnRequest:"Richiedi l‚Äôaccesso al Pilot", btnDash:"Anteprima Dashboard", btnDeck:"Vedi Deck Live", btnPDF:"Scarica Deck PDF",
        priceTail:"Focalizzati su una tipologia di immobile; concorda 2‚Äì3 metriche di successo.",
        goldH3:"Advisor Charter (Pilot)",
        goldP1:"Invitiamo una cerchia ristretta di early advisor a vedere Kintra prima del lancio.",
        goldP2:"Ruolo leggero ma utile: guarda l‚Äôanteprima live, dai un rapido indirizzo e (solo se ha senso) apri 1‚Äì2 porte fidate.",
        goldP3:"Zero carico operativo; upside chiaro se il pilot performa. Gli advisor sono elencati solo su autorizzazione.",
        trust:"Scelto da agenti italiani che costruiscono funnel pi√π veloci.",
        why:"Perch√© conta (tempo ‚Üí denaro)",
        math:"Se ogni risposta pi√π rapida fa risparmiare ~2 minuti, 20 lead = 40 minuti recuperati ‚Äî per agente, al giorno.",
        compounds:"Ogni minuto risparmiato qui si moltiplica nel corso della giornata.",
        lsTitle:"Listing Summary (anteprima composita)",
        lsSub:"A colpo d‚Äôocchio: dati chiave, tag e prossima azione ‚Äî pronti da inviare.",
        lsHeadRight:"Anteprima",
        lsChip:"Apri Listing Summary",
        pilotTitle:"Avvia il tuo Pilot Charter (30 giorni)",
        pilotSub:"Setup leggero. Valore rapido. Se funziona, continui; altrimenti, stop ‚Äî rischio zero.",
        noSpam:"Niente spam. Accesso anticipato limitato.",
        waSend:"Invia via WhatsApp (demo Meta)",
        waSendSub:"Usa Meta Cloud API (numero di test) per inviare un messaggio reale.",
        labPhone:"Telefono destinatario (E.164)", labMsg:"Messaggio",
        tipText:'Nota: il destinatario deve prima inviare ‚Äúhello‚Äù al numero di test.',
        revealBtn:'Mostra numero di test', copyBtn:'Copia', copied:'Copiato', copyFail:'Copia non riuscita',
        publicNote:'Per i visitatori pubblici nascondiamo il numero per ridurre lo spam. I partner hanno una sandbox dedicata.',
        langLabel:"Lingua"
      }
    };

    const $ = s=>document.querySelector(s);
    function setLang(lang){
      const d = dict[lang];
      $("#badge").textContent = d.badge;
      $("#h1").textContent = d.h1;
      $("#lead").textContent = d.lead;
      $("#sub").textContent = d.sub;
      $("#btn-request").textContent = (lang==='it'?dict.it.btnRequest:dict.en.btnRequest);
      $("#btn-dash").textContent = (lang==='it'?dict.it.btnDash:dict.en.btnDash);
      $("#btn-deck").textContent = (lang==='it'?dict.it.btnDeck:dict.en.btnDeck);
      $("#btn-pdf").textContent = (lang==='it'?dict.it.btnPDF:dict.en.btnPDF);
      $("#price-tail").textContent = d.priceTail;
      $("#goldH3").textContent = d.goldH3;
      $("#goldP1").textContent = d.goldP1;
      $("#goldP2").textContent = d.goldP2;
      $("#goldP3").textContent = d.goldP3;
      $("#trust-line").textContent = d.trust;
      $("#why").textContent = d.why;
      $("#math").textContent = d.math;
      $("#compounds").textContent = d.compounds;
      $("#lsTitle").textContent = d.lsTitle;
      $("#lsSub").textContent = d.lsSub;
      $("#lsHeadRight").textContent = d.lsHeadRight;
      $("#lsChip").textContent = d.lsChip;
      $("#pilotTitle").textContent = d.pilotTitle;
      $("#pilotSub").textContent = d.pilotSub;
      $("#noSpam").textContent = d.noSpam;
      $("#wa-send").textContent = d.waSend;
      $("#wa-send-sub").textContent = d.waSendSub;
      $("#lab-phone").textContent = d.labPhone;
      $("#lab-msg").textContent = d.labMsg;
      $("#waTip").childNodes[0].textContent = (lang==='it'?dict.it.tipText:dict.en.tipText)+' ';
      $("#revealTestNum").textContent = d.revealBtn;
      $("#publicNote").textContent = d.publicNote;
      $("#lang-label").textContent = d.langLabel;

      document.documentElement.lang = lang;
      $("#lang-en").classList.toggle("active", lang==="en");
      $("#lang-it").classList.toggle("active", lang==="it");
      $("#lang-en").setAttribute("aria-pressed", lang==="en");
      $("#lang-it").setAttribute("aria-pressed", lang==="it");
      localStorage.setItem("kintra_lang", lang);

      // re-render WA block with correct language
      renderWA( $("#tab-before").classList.contains("active") ? "before" : "after" );
    }
    $("#lang-en").onclick = ()=> setLang("en");
    $("#lang-it").onclick = ()=> setLang("it");
    setLang(localStorage.getItem("kintra_lang") || "en");

    // --- WhatsApp Smart Reply i18n + renderer (self-contained) ---
    const waI18n = {
      en:{
        before:"Before", after:"After",
        keys:["Client ‚Üí inbound message","Kintra ‚Üí detects intent & drafts reply","Agent ‚Üí approves & sends"],
        beforeTop:"Manual reply ~2‚Äì4 min",
        afterTop:"Auto-draft ~10‚Äì20 sec",
        clientMsg:"Hi ‚Äî are you available for a viewing tomorrow after work around 18:30?",
        agentLine1:"Sure ‚Äî the apartment is available. I can propose tomorrow at 17:00 or Thursday at 10:30. Which do you prefer?",
        agentLine2:"I can also send the floor plan and directions. I‚Äôll confirm and send a 24-hour reminder.",
        manualTimingLabel:"Manual reply:",
        autoTimingLabel:"Auto-draft:",
        legendClient:"Client", legendAI:"Kintra (AI)", legendAgent:"Agent"
      },
      it:{
        before:"Prima", after:"Dopo",
        keys:["Cliente ‚Üí messaggio in arrivo","Kintra ‚Üí rileva l‚Äôintento e prepara la bozza","Agente ‚Üí approva e invia"],
        beforeTop:"Risposta manuale ~2‚Äì4 min",
        afterTop:"Bozza automatica ~10‚Äì20 sec",
        clientMsg:"Ciao ‚Äî √® possibile una visita domani dopo il lavoro verso le 18:30?",
        agentLine1:"Certo ‚Äî l‚Äôappartamento √® disponibile. Posso proporre domani alle 17:00 o gioved√¨ alle 10:30. Quale preferisce?",
        agentLine2:"Posso inviare anche planimetria e indicazioni. Confermo e invio promemoria 24h prima.",
        manualTimingLabel:"Risposta manuale:",
        autoTimingLabel:"Bozza automatica:",
        legendClient:"Cliente", legendAI:"Kintra (AI)", legendAgent:"Agente"
      }
    };
    const $wa = s => document.querySelector(s);
    const getLang = () => (document.documentElement.lang || 'en').startsWith('it') ? 'it' : 'en';

    function renderWA(mode){
      const L = getLang();
      const t = waI18n[L];

      // Tabs labels
      $wa('#tab-before').textContent = t.before;
      $wa('#tab-after').textContent  = t.after;

      // Legend + keys
      $wa('#legendClient').textContent = t.legendClient;
      $wa('#legendAI').textContent     = t.legendAI;
      $wa('#legendAgent').textContent  = t.legendAgent;

      const [k1,k2,k3] = t.keys;
      $wa('#key1').textContent = k1;
      $wa('#key2').textContent = k2;
      $wa('#key3').textContent = k3;

      // Timing label
      $wa('#waTopLabel').textContent = (mode==='before') ? t.beforeTop : t.afterTop;

      // Bubbles
      const body = $wa('#waBody');
      if(mode==='before'){
        body.innerHTML = `
          <div class="bubble client"><span class="dot client" title="${t.legendClient}"></span> ${t.clientMsg}</div>
          <div class="bubble agent"><span class="dot agent" title="${t.legendAgent}"></span> ${t.agentLine1}</div>
          <div class="bubble agent"><span class="dot agent" title="${t.legendAgent}"></span> ${t.agentLine2}</div>
          <div class="meta-row"><span class="pill"><b>${t.manualTimingLabel}</b> ~2‚Äì4 min</span></div>
        `;
      } else {
        body.innerHTML = `
          <div class="bubble client"><span class="dot client" title="${t.legendClient}"></span> ${t.clientMsg}</div>
          <div class="bubble ai"><span class="dot ai" title="${t.legendAI}"></span> ${t.agentLine1}</div>
          <div class="bubble ai"><span class="dot ai" title="${t.legendAI}"></span> ${t.agentLine2}</div>
          <div class="meta-row"><span class="pill"><b>${t.autoTimingLabel}</b> ~10‚Äì20 sec</span></div>
        `;
      }
    }

    const beforeBtn = $wa('#tab-before');
    const afterBtn  = $wa('#tab-after');
    function setActive(which){
      const isBefore = (which==='before');
      beforeBtn.classList.toggle('active', isBefore);
      beforeBtn.setAttribute('aria-selected', String(isBefore));
      afterBtn.classList.toggle('active', !isBefore);
      afterBtn.setAttribute('aria-selected', String(!isBefore));
      renderWA(which);
    }
    beforeBtn?.addEventListener('click', ()=> setActive('before'));
    afterBtn ?.addEventListener('click', ()=> setActive('after'));

    // Re-render when <html lang> changes
    const langObserver = new MutationObserver(()=> {
      setActive( beforeBtn.classList.contains('active') ? 'before' : 'after' );
    });
    langObserver.observe(document.documentElement, { attributes:true, attributeFilter:['lang'] });

    // Initial render
    setActive('before');

    // --- WhatsApp demo send stub ---
    const TEST_NUMBER = "+39 3XX XXX XXXX";
    const WA_WORKER = 'https://kintra-wa-meta.founder-60b.workers.dev';
    const waBtn = $('#sendWA'), waOut = $('#waResult');
    const revealBtn = $('#revealTestNum');
    const testWrap  = $('#testNumWrap');
    const testNumEl = $('#testNum');
    const copyBtn   = $('#copyTestNum');

    revealBtn.onclick = ()=>{ testNumEl.textContent = TEST_NUMBER; testWrap.style.display='inline'; revealBtn.style.display='none'; };
    copyBtn.onclick = async ()=>{
      try{ await navigator.clipboard.writeText(TEST_NUMBER); copyBtn.textContent = (dict[getLang()].copied||"Copied"); }
      catch{ copyBtn.textContent = (dict[getLang()].copyFail||"Copy failed"); }
      setTimeout(()=> copyBtn.textContent = (dict[getLang()].copyBtn||"Copy"), 1500);
    };

    waBtn.onclick = async ()=>{
      const to = ($('#phone').value||'').trim() || TEST_NUMBER.replace(/\s+/g,'');
      const text = ($('#msg').value||'').trim() || 'Ciao from the Kintra pilot!';
      waOut.textContent = 'Sending‚Ä¶';
      try{
        const res = await fetch(WA_WORKER + '/api/wa', {
          method:'POST', headers:{'Content-Type':'application/json'},
          body: JSON.stringify({ to, text })
        });
        const txt = await res.text();
        let json; try{ json = JSON.parse(txt); }catch{ json = { raw: txt }; }
        if(!res.ok) throw new Error(json?.metaErr?.message || txt);
        waOut.textContent = JSON.stringify(json, null, 2);
      }catch(e){
        waOut.textContent = 'Error: ' + e.message;
      }
    };
  </script>
</body>
</html>
