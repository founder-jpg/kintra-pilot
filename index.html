<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Kintra ‚Äî Pilot ‚Ä¢ Italy</title>

  <!-- OG / Share -->
  <meta property="og:title" content="Kintra ‚Äî Pilot ‚Ä¢ Italy" />
  <meta property="og:description" content="AI tools that help agents reply faster and book more viewings ‚Äî inside WhatsApp." />
  <meta property="og:image" content="./img/og.jpg" />
  <meta name="theme-color" content="#0b2347" />

  <link rel="icon" href="./img/logo.png.png" />
  <style>
    :root{
      --navy:#0b2347; --gold:#c9a227; --ink:#0f172a; --muted:#6b7280; --line:#e5e7eb; --bg:#ffffff;
      --radius:14px; --max:1100px;
    }
    *{box-sizing:border-box}
    html,body{margin:0;background:#fff;color:var(--ink);font:16px/1.55 system-ui,-apple-system,Segoe UI,Roboto,Inter,Arial}
    a{color:var(--navy);text-decoration:none}
    a:hover{text-decoration:underline}
    .wrap{max-width:var(--max);margin:0 auto;padding:24px}
    header{display:flex;align-items:center;gap:16px;justify-content:space-between;margin-bottom:12px}
    .brand{display:flex;align-items:center;gap:10px}
    .brand img{width:28px;height:28px;border-radius:8px;object-fit:contain}
    .badge{padding:4px 10px;border:1px solid var(--line);border-radius:999px;color:var(--muted);font-size:13px}
    .lang{display:flex;gap:6px;align-items:center}
    .lang button{border:1px solid var(--line);background:#fff;border-radius:10px;padding:6px 10px;cursor:pointer;font-size:13px}
    .lang button.active{border-color:var(--gold);color:var(--navy)}
    .hero{display:grid;grid-template-columns:1.15fr 0.85fr;gap:28px;align-items:center;margin:18px 0 10px}
    h1{font-size:40px;line-height:1.1;margin:0 0 10px;color:var(--navy)}
    .lead{font-size:18px;color:var(--ink);margin:0 0 8px}
    .sub{color:var(--muted);margin:0 0 16px}
    .cta-row{display:flex;flex-wrap:wrap;gap:10px;margin:12px 0 8px}
    .btn{border:1px solid var(--navy);color:#fff;background:var(--navy);padding:10px 14px;border-radius:12px;cursor:pointer}
    .btn.alt{background:#fff;color:var(--navy)}
    .btn.ghost{background:#fff;color:var(--navy);border-color:var(--line)}
    .note{font-size:13px;color:var(--muted)}
    .split{display:grid;grid-template-columns:1fr 1fr;gap:22px;margin:26px 0}
    .card{border:1px solid var(--line);border-radius:var(--radius);padding:16px;background:#fff}
    .card h3{margin:0 0 8px;font-size:18px;color:var(--navy)}
    .meta{font-size:14px;color:var(--muted)}
    .tiles{display:grid;grid-template-columns:repeat(3,1fr);gap:12px;margin-top:10px}
    .tile{border:1px dashed var(--line);border-radius:12px;height:70px;display:flex;align-items:center;justify-content:center;color:#9aa0a6;background:#fafafa;font-size:12px}
    .shots{display:grid;grid-template-columns:repeat(3,1fr);gap:10px}
    .shots img{width:100%;height:210px;object-fit:cover;border-radius:12px;border:1px solid var(--line)}
    .demo{display:grid;grid-template-columns:1fr;gap:16px}
    .field{display:flex;flex-direction:column;gap:6px}
    .field input,.field textarea{border:1px solid var(--line);border-radius:12px;padding:10px 12px;font-size:15px}
    .field textarea{min-height:90px;resize:vertical}
    .result{font-family:ui-monospace, SFMono-Regular, Menlo, Consolas, "Liberation Mono", monospace;border:1px solid var(--line);border-radius:12px;padding:12px;background:#fcfcfc;white-space:pre-wrap}
    .cols-2{display:grid;grid-template-columns:1fr 1fr;gap:18px}
    .hr{height:1px;background:var(--line);margin:18px 0}
    .testis{display:grid;grid-template-columns:1fr 1fr;gap:16px}
    .t{border:1px solid var(--line);border-radius:12px;padding:14px;background:#fff}
    .t .by{color:var(--muted);font-size:13px;margin-top:8px}
    .wa-tip{font-size:13px;color:var(--muted)}
    footer{margin:30px 0 10px;color:var(--muted);font-size:14px;display:flex;justify-content:space-between;gap:10px;flex-wrap:wrap}
    .kicker{border-left:3px solid var(--gold);padding-left:12px;background:linear-gradient(90deg, rgba(201,162,39,0.08), transparent);border-radius:6px;margin-top:8px}
    .soft{color:#7c8494}
    @media (max-width:980px){
      .hero,.split,.cols-2,.testis{grid-template-columns:1fr}
      .shots img{height:180px}
      h1{font-size:32px}
    }
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <div class="brand">
        <img src="./img/logo.png.png" alt="Kintra logo" />
        <strong>Kintra</strong>
        <span class="badge" id="badge">Pilot ‚Ä¢ Italy</span>
      </div>
      <div class="lang">
        <button id="lang-en" class="active">EN</button>
        <button id="lang-it">IT</button>
      </div>
    </header>

    <!-- HERO -->
    <section class="hero">
      <div>
        <h1 id="h1">From listing to leads, faster</h1>
        <p class="lead" id="lead">AI tools that help agents reply faster and book more viewings ‚Äî inside WhatsApp.</p>
        <p class="sub" id="sub">Agents waste hours switching tabs. Kintra brings every lead back into one thread, drafts replies, and suggests next steps.</p>
        <div class="cta-row">
          <a class="btn" href="#pilot" id="btn-request">Request Pilot Access</a>
          <a class="btn alt" href="./dashboard.html" id="btn-dash">Preview Dashboard</a>
          <a class="btn ghost" href="./deck.html" id="btn-deck">View Live Deck</a>
          <a class="btn ghost" href="./deck/Kintra_PilotDeck_v1.pdf" target="_blank" id="btn-pdf">View Deck PDF</a>
        </div>
        <div class="note" id="hero-note">See the live preview, then start a 2‚Äì4 week pilot. No risk if it doesn‚Äôt save time.</div>
        <div class="kicker" id="trust-line" style="margin-top:10px;">Trusted by Italian agents building faster funnels.</div>
      </div>
      <div class="card">
        <h3 id="why">Why this matters (time ‚Üí money)</h3>
        <div class="meta" id="math">If each faster reply saves ~2 minutes, 20 leads = 40 minutes reclaimed ‚Äî per agent, per day.</div>
        <div class="hr"></div>
        <div class="meta" id="compounds">Every minute saved here compounds by the hour.</div>
        <div class="tiles">
          <div class="tile">Client logo (confidential)</div>
          <div class="tile">Client logo (confidential)</div>
          <div class="tile">Client logo (confidential)</div>
        </div>
      </div>
    </section>

    <!-- VISUAL PREVIEW -->
    <section class="split">
      <div class="card">
        <h3 id="wa-prev">WhatsApp preview</h3>
        <div class="meta" id="wa-desc">Kintra drafts structured replies and action prompts so nothing slips.</div>
        <div class="shots" style="margin-top:8px">
          <img src="./img/whatsapp-reply.png" alt="WhatsApp reply preview" />
          <img src="./img/listing-summary.png" alt="Listing summary preview" />
          <img src="./img/dashboard-mini.png" alt="Dashboard mini preview" />
        </div>
      </div>
      <div class="card">
        <h3 id="demo-h3">Try a 10-second demo</h3>
        <div class="meta" id="demo-sub">We normalize your text and suggest an Italian hint. In the pilot this becomes an instant reply draft + next action.</div>
        <div class="field" style="margin-top:8px">
          <label for="q" id="your-text">Your text</label>
          <textarea id="q" placeholder="hello please"></textarea>
        </div>
        <div class="cta-row">
          <button class="btn" id="run-demo">Run Demo</button>
          <span class="soft" style="align-self:center;font-size:13px">Powered by AI (quietly)</span>
        </div>
        <div id="demo-result" class="result" style="margin-top:8px">‚Äî</div>
      </div>
    </section>

    <!-- TESTIMONIALS -->
    <section class="testis">
      <div class="t">
        <div id="t1">‚ÄúKintra saved our agents real time. Replies are faster, and follow-ups don‚Äôt slip.‚Äù</div>
        <div class="by" id="t1by">‚Äî Early partner (pilot)</div>
      </div>
      <div class="t">
        <div id="t2">‚ÄúSetup was easy. We plugged in WhatsApp + web and started seeing value the same week.‚Äù</div>
        <div class="by" id="t2by">‚Äî Agency lead (pilot)</div>
      </div>
    </section>

    <div class="hr"></div>

    <!-- WHATSAPP SEND (META DEMO) -->
    <section class="split">
      <div class="card">
        <h3 id="wa-send">Send via WhatsApp (Meta demo)</h3>
        <div class="meta" id="wa-send-sub">Uses Meta Cloud API (test number) to send a real message.</div>

        <div class="cols-2" style="margin-top:8px">
          <div class="field">
            <label for="phone" id="lab-phone">Recipient phone (E.164)</label>
            <input id="phone" placeholder="+39‚Ä¶" />
          </div>
          <div class="field">
            <label for="msg" id="lab-msg">Message</label>
            <input id="msg" placeholder="Ciao from the Kintra pilot!" />
          </div>
        </div>

        <div class="cta-row" style="margin-top:8px">
          <button class="btn" id="send-wa">Send WhatsApp</button>
          <span class="wa-tip" id="wa-tip">Tip: The recipient must first send ‚Äúhello‚Äù to the Meta test number.</span>
        </div>

        <div id="wa-result" class="result" style="margin-top:8px">‚Äî</div>
      </div>

      <!-- PILOT FORM -->
      <div class="card" id="pilot">
        <h3 id="start-pilot">Start your 2‚Äì4 week pilot</h3>
        <div class="meta" id="pilot-sub">Light setup. Quick value. If it works for you, continue; if not, stop ‚Äî zero risk.</div>

        <div class="field" style="margin-top:8px">
          <label for="name" id="lab-name">Name</label>
          <input id="name" placeholder="Alex Rossi" />
        </div>
        <div class="field">
          <label for="email" id="lab-email">Work email</label>
          <input id="email" placeholder="alex.rossi@agency.it" />
        </div>
        <div class="field">
          <label for="wf" id="lab-wf">What‚Äôs your current workflow? (optional)</label>
          <textarea id="wf" placeholder="We handle inbound on WhatsApp + email, want faster replies‚Ä¶"></textarea>
        </div>
        <div class="cta-row" style="margin-top:8px">
          <button class="btn" id="pilot-submit">‚Üí Start My Pilot</button>
          <span class="note" id="pilot-note">No spam. Limited early access.</span>
        </div>
        <div id="pilot-result" class="result" style="margin-top:8px;display:none"></div>
      </div>
    </section>

    <div class="hr"></div>

    <!-- VALUE RECAP -->
    <section class="split">
      <div class="card">
        <h3 id="value1">Real replies. Real appointments. Real growth.</h3>
        <ul class="meta" style="margin:6px 0 0 16px">
          <li id="v1a">Faster replies with instant Italian phrasing.</li>
          <li id="v1b">Nothing slips: summaries + next-steps across WhatsApp and web.</li>
          <li id="v1c">A daily snapshot managers can trust.</li>
        </ul>
      </div>
      <div class="card">
        <h3 id="infra">Built on Meta Cloud infrastructure.</h3>
        <div class="meta" id="infra-sub">Secure, scalable, and ready for production pilots.</div>
      </div>
    </section>

    <footer>
      <div id="world">üåç From Italy to the world ‚Äî join the next wave.</div>
      <div>¬© 2025 Kintra. <span id="foot-mail">Pilot inquiries: <a href="mailto:pilot@kintra.xyz">pilot@kintra.xyz</a></span></div>
    </footer>
  </div>

  <script>
    // ---- Config ----
    const WORKER_BASE = 'https://kintra-api.founder-60b.workers.dev';   // your prompt/normalizer worker (fallbacks below)
    const WA_WORKER   = 'https://kintra-wa-meta.founder-60b.workers.dev'; // your WhatsApp worker

    // ---- EN / IT copy ----
    const dict = {
      en: {
        badge: "Pilot ‚Ä¢ Italy",
        h1: "From listing to leads, faster",
        lead: "AI tools that help agents reply faster and book more viewings ‚Äî inside WhatsApp.",
        sub: "Agents waste hours switching tabs. Kintra brings every lead back into one thread, drafts replies, and suggests next steps.",
        btnRequest: "Request Pilot Access",
        btnDash: "Preview Dashboard",
        btnDeck: "View Live Deck",
        btnPDF: "View Deck PDF",
        heroNote: "See the live preview, then start a 2‚Äì4 week pilot. No risk if it doesn‚Äôt save time.",
        trustLine: "Trusted by Italian agents building faster funnels.",
        why: "Why this matters (time ‚Üí money)",
        math: "If each faster reply saves ~2 minutes, 20 leads = 40 minutes reclaimed ‚Äî per agent, per day.",
        compounds: "Every minute saved here compounds by the hour.",
        waPrev: "WhatsApp preview",
        waDesc: "Kintra drafts structured replies and action prompts so nothing slips.",
        demoH3: "Try a 10-second demo",
        demoSub: "We normalize your text and suggest an Italian hint. In the pilot this becomes an instant reply draft + next action.",
        yourText: "Your text",
        t1: "‚ÄúKintra saved our agents real time. Replies are faster, and follow-ups don‚Äôt slip.‚Äù",
        t1by:"‚Äî Early partner (pilot)",
        t2: "‚ÄúSetup was easy. We plugged in WhatsApp + web and started seeing value the same week.‚Äù",
        t2by:"‚Äî Agency lead (pilot)",
        waSend: "Send via WhatsApp (Meta demo)",
        waSendSub:"Uses Meta Cloud API (test number) to send a real message.",
        labPhone:"Recipient phone (E.164)",
        labMsg:"Message",
        waTip:"Tip: The recipient must first send ‚Äúhello‚Äù to the Meta test number.",
        startPilot:"Start your 2‚Äì4 week pilot",
        pilotSub:"Light setup. Quick value. If it works for you, continue; if not, stop ‚Äî zero risk.",
        labName:"Name",
        labEmail:"Work email",
        labWf:"What‚Äôs your current workflow? (optional)",
        pilotNote:"No spam. Limited early access.",
        value1:"Real replies. Real appointments. Real growth.",
        v1a:"Faster replies with instant Italian phrasing.",
        v1b:"Nothing slips: summaries + next-steps across WhatsApp and web.",
        v1c:"A daily snapshot managers can trust.",
        infra:"Built on Meta Cloud infrastructure.",
        infraSub:"Secure, scalable, and ready for production pilots.",
        world:"üåç From Italy to the world ‚Äî join the next wave."
      },
      it: {
        badge: "Pilot ‚Ä¢ Italia",
        h1: "Dall‚Äôannuncio ai lead, pi√π velocemente",
        lead: "Strumenti che aiutano gli agenti a rispondere pi√π in fretta e fissare pi√π visite ‚Äî dentro WhatsApp.",
        sub: "Gli agenti perdono tempo passando da una scheda all‚Äôaltra. Kintra riporta ogni lead in un unico thread, prepara le risposte e suggerisce le prossime azioni.",
        btnRequest: "Richiedi l‚Äôaccesso al pilot",
        btnDash: "Anteprima Dashboard",
        btnDeck: "Vedi Deck Live",
        btnPDF: "Scarica Deck PDF",
        heroNote: "Guarda l‚Äôanteprima live, poi avvia un pilot di 2‚Äì4 settimane. Zero rischio se non fa risparmiare tempo.",
        trustLine: "Scelto da agenti italiani che costruiscono funnel pi√π veloci.",
        why: "Perch√© conta (tempo ‚Üí denaro)",
        math: "Se ogni risposta pi√π rapida fa risparmiare ~2 minuti, 20 lead = 40 minuti recuperati ‚Äî per agente, al giorno.",
        compounds: "Ogni minuto risparmiato qui si moltiplica nel corso della giornata.",
        waPrev: "Anteprima WhatsApp",
        waDesc: "Kintra prepara risposte strutturate e prossime azioni cos√¨ non sfugge nulla.",
        demoH3: "Prova demo in 10 secondi",
        demoSub: "Normalizziamo il testo e suggeriamo un accenno in italiano. Nel pilot diventa una bozza pronta + prossima azione.",
        yourText: "Il tuo testo",
        t1: "¬´Kintra ha fatto risparmiare tempo reale ai nostri agenti. Le risposte sono pi√π rapide e i follow-up non saltano.¬ª",
        t1by:"‚Äî Partner iniziale (pilot)",
        t2: "¬´Setup semplice. Abbiamo collegato WhatsApp + web e visto valore gi√† nella stessa settimana.¬ª",
        t2by:"‚Äî Responsabile agenzia (pilot)",
        waSend: "Invia via WhatsApp (demo Meta)",
        waSendSub:"Usa Meta Cloud API (numero di test) per inviare un messaggio reale.",
        labPhone:"Numero destinatario (E.164)",
        labMsg:"Messaggio",
        waTip:"Suggerimento: prima il destinatario deve inviare ‚Äúhello‚Äù al numero di test Meta.",
        startPilot:"Avvia il pilot di 2‚Äì4 settimane",
        pilotSub:"Setup leggero. Valore rapido. Se funziona, si continua; altrimenti si chiude ‚Äî zero rischi.",
        labName:"Nome",
        labEmail:"Email di lavoro",
        labWf:"Qual √® il tuo flusso attuale? (opzionale)",
        pilotNote:"Niente spam. Accesso anticipato limitato.",
        value1:"Risposte reali. Appuntamenti reali. Crescita reale.",
        v1a:"Risposte pi√π rapide con fraseggio italiano istantaneo.",
        v1b:"Non sfugge nulla: riepiloghi + prossime azioni su WhatsApp e web.",
        v1c:"Una vista giornaliera affidabile per i responsabili.",
        infra:"Basato su infrastruttura Meta Cloud.",
        infraSub:"Sicuro, scalabile e pronto per i pilot in produzione.",
        world:"üåç Dall‚ÄôItalia al mondo ‚Äî unisciti alla prossima ondata."
      }
    };

    const els = {
      badge:   document.getElementById('badge'),
      h1:      document.getElementById('h1'),
      lead:    document.getElementById('lead'),
      sub:     document.getElementById('sub'),
      btnRequest: document.getElementById('btn-request'),
      btnDash: document.getElementById('btn-dash'),
      btnDeck: document.getElementById('btn-deck'),
      btnPDF:  document.getElementById('btn-pdf'),
      heroNote:document.getElementById('hero-note'),
      trustLine:document.getElementById('trust-line'),
      why:     document.getElementById('why'),
      math:    document.getElementById('math'),
      compounds:document.getElementById('compounds'),
      waPrev:  document.getElementById('wa-prev'),
      waDesc:  document.getElementById('wa-desc'),
      demoH3:  document.getElementById('demo-h3'),
      demoSub: document.getElementById('demo-sub'),
      yourText:document.getElementById('your-text'),
      t1:      document.getElementById('t1'),
      t1by:    document.getElementById('t1by'),
      t2:      document.getElementById('t2'),
      t2by:    document.getElementById('t2by'),
      waSend:  document.getElementById('wa-send'),
      waSendSub:document.getElementById('wa-send-sub'),
      labPhone:document.getElementById('lab-phone'),
      labMsg:  document.getElementById('lab-msg'),
      waTip:   document.getElementById('wa-tip'),
      startPilot:document.getElementById('start-pilot'),
      pilotSub:document.getElementById('pilot-sub'),
      labName: document.getElementById('lab-name'),
      labEmail:document.getElementById('lab-email'),
      labWf:   document.getElementById('lab-wf'),
      pilotNote:document.getElementById('pilot-note'),
      value1:  document.getElementById('value1'),
      v1a:     document.getElementById('v1a'),
      v1b:     document.getElementById('v1b'),
      v1c:     document.getElementById('v1c'),
      infra:   document.getElementById('infra'),
      infraSub:document.getElementById('infra-sub'),
      world:   document.getElementById('world'),
    };

    function setLang(lang){
      const d = dict[lang];
      els.badge.textContent   = d.badge;
      els.h1.textContent      = d.h1;
      els.lead.textContent    = d.lead;
      els.sub.textContent     = d.sub;
      els.btnRequest.textContent = d.btnRequest;
      els.btnDash.textContent = d.btnDash;
      els.btnDeck.textContent = d.btnDeck;
      els.btnPDF.textContent  = d.btnPDF;
      els.heroNote.textContent= d.heroNote;
      els.trustLine.textContent = d.trustLine;
      els.why.textContent     = d.why;
      els.math.textContent    = d.math;
      els.compounds.textContent=d.compounds;
      els.waPrev.textContent  = d.waPrev;
      els.waDesc.textContent  = d.waDesc;
      els.demoH3.textContent  = d.demoH3;
      els.demoSub.textContent = d.demoSub;
      els.yourText.textContent= d.yourText;
      els.t1.textContent      = d.t1;
      els.t1by.textContent    = d.t1by;
      els.t2.textContent      = d.t2;
      els.t2by.textContent    = d.t2by;
      els.waSend.textContent  = d.waSend;
      els.waSendSub.textContent = d.waSendSub;
      els.labPhone.textContent= d.labPhone;
      els.labMsg.textContent  = d.labMsg;
      els.waTip.textContent   = d.waTip;
      els.startPilot.textContent = d.startPilot;
      els.pilotSub.textContent = d.pilotSub;
      els.labName.textContent = d.labName;
      els.labEmail.textContent= d.labEmail;
      els.labWf.textContent   = d.labWf;
      els.pilotNote.textContent = d.pilotNote;
      els.value1.textContent  = d.value1;
      els.v1a.textContent     = d.v1a;
      els.v1b.textContent     = d.v1b;
      els.v1c.textContent     = d.v1c;
      els.infra.textContent   = d.infra;
      els.infraSub.textContent= d.infraSub;
      els.world.textContent   = d.world;

      // placeholders
      document.getElementById('q').placeholder = (lang==='it'?'scrivi qui‚Ä¶':'hello please');
      document.getElementById('name').placeholder = (lang==='it'?'Alex Rossi':'Alex Rossi');
      document.getElementById('email').placeholder = (lang==='it'?'alex.rossi@agency.it':'alex.rossi@agency.it');
      document.getElementById('wf').placeholder = (lang==='it'?'Gestiamo inbound su WhatsApp + email, vogliamo risposte pi√π rapide‚Ä¶':'We handle inbound on WhatsApp + email, want faster replies‚Ä¶');
      document.getElementById('phone').placeholder = (lang==='it'?'+39‚Ä¶':'+39‚Ä¶');
      document.getElementById('msg').placeholder = (lang==='it'?'Ciao dal pilot Kintra!':'Ciao from the Kintra pilot!');
      document.getElementById('lang-en').classList.toggle('active', lang==='en');
      document.getElementById('lang-it').classList.toggle('active', lang==='it');
      localStorage.setItem('kintra_lang', lang);
    }

    document.getElementById('lang-en').onclick = ()=> setLang('en');
    document.getElementById('lang-it').onclick = ()=> setLang('it');
    setLang(localStorage.getItem('kintra_lang') || 'en');

    // ---- 10-second demo ----
    const demoBtn = document.getElementById('run-demo');
    const demoOut = document.getElementById('demo-result');

    demoBtn.onclick = async () => {
      const q = (document.getElementById('q').value || '').trim() || 'hello please';
      demoOut.textContent = 'Running‚Ä¶';
      try{
        // Try real worker if present
        const res = await fetch(WORKER_BASE + '/api/prompt', {
          method:'POST',
          headers:{'Content-Type':'application/json'},
          body: JSON.stringify({ text: q })
        });
        const txt = await res.text();
        let json; try{ json = JSON.parse(txt); }catch{ json = { raw: txt }; }
        if(!res.ok) throw new Error(json?.error || txt);

        demoOut.textContent = JSON.stringify(json, null, 2);
      }catch(e){
        // graceful fallback (static instant reply draft)
        const draft = (q.toLowerCase().includes('friday') || q.includes('18:30'))
          ? 'Certo! L‚Äôappartamento √® disponibile. Posso proporre domani alle 17:00 oppure mercoled√¨ alle 10:30. Preferisce una delle due?'
          : 'Certo! Posso inviare dettagli e proporre due orari per la visita. Quale preferisce?';
        const mock = {
          ok:true,
          result:{
            input:q,
            normalized:q.toLowerCase().trim(),
            italian_hint:"proporre due orari + chiedere conferma",
            instant_reply_draft:draft,
            next_step:"Invia conferma + promemoria 24h prima"
          },
          ts:new Date().toISOString()
        };
        demoOut.textContent = JSON.stringify(mock, null, 2);
      }
    };

    // ---- Pilot form (logs locally for now) ----
    document.getElementById('pilot-submit').onclick = () => {
      const name = document.getElementById('name').value.trim();
      const email= document.getElementById('email').value.trim();
      const wf   = document.getElementById('wf').value.trim();
      const out  = document.getElementById('pilot-result');
      out.style.display='block';
      out.textContent = JSON.stringify({ ok:true, saved:true, name, email, workflow:wf, ts:new Date().toISOString() }, null, 2);
    };

    // ---- WhatsApp send via Worker ----
    const waBtn = document.getElementById('send-wa');
    const waOut = document.getElementById('wa-result');
    waBtn.onclick = async () => {
      const to = (document.getElementById('phone').value||'').trim();
      const text = (document.getElementById('msg').value||'').trim() || 'Ciao from the Kintra pilot!';
      waOut.textContent = 'Sending‚Ä¶';
      try{
        const res = await fetch(WA_WORKER + '/api/wa', {
          method:'POST',
          headers:{'Content-Type':'application/json'},
          body: JSON.stringify({ to, text })
        });
        const txt = await res.text();
        let json; try{ json = JSON.parse(txt); }catch{ json = { raw: txt }; }
        if(!res.ok){
          const hint = json?.hint ? `\nHint: ${json.hint}` : '';
          throw new Error((json?.metaErr?.message || txt) + hint);
        }
        waOut.textContent = JSON.stringify(json, null, 2);
      }catch(e){
        waOut.textContent = 'Error: ' + e.message;
      }
    };
  </script>
</body>
</html>
